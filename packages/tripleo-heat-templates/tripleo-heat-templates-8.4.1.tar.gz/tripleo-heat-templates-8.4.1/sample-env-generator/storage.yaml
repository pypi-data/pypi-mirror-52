environments:
  -
    name: storage/enable-ceph
    title: Enable Ceph Storage Backend
    files:
      puppet/services/cinder-volume.yaml:
        parameters:
          - CinderEnableIscsiBackend
          - CinderEnableRbdBackend
      puppet/services/cinder-backup.yaml:
        parameters:
          - CinderBackupBackend
      puppet/services/nova-compute.yaml:
        parameters:
          - NovaEnableRbdBackend
      puppet/services/glance-api.yaml:
        parameters:
          - GlanceBackend
      puppet/services/gnocchi-api.yaml:
        parameters:
          - GnocchiBackend
    sample_values:
      CinderEnableIscsiBackend: False
      CinderEnableRbdBackend: True
      CinderBackupBackend: rbd
      NovaEnableRbdBackend: True
      GlanceBackend: rbd
      GnocchiBackend: rbd
    resource_registry:
      OS::TripleO::Services::CephMgr: ../../docker/services/ceph-ansible/ceph-mgr.yaml
      OS::TripleO::Services::CephMon: ../../docker/services/ceph-ansible/ceph-mon.yaml
      OS::TripleO::Services::CephOSD: ../../docker/services/ceph-ansible/ceph-osd.yaml
      OS::TripleO::Services::CephClient: ../../docker/services/ceph-ansible/ceph-client.yaml
    description: |
      Include this environment to enable Ceph as the backend for
      Cinder, Nova, Gnocchi, and Glance.
  -
    name: storage/cinder-nfs
    title: Enable Cinder NFS Backend
    files:
      puppet/services/cinder-volume.yaml:
        parameters:
          - CinderNfsMountOptions
          - CinderNfsServers
          - CinderEnableNfsBackend
          - CinderEnableIscsiBackend
    sample_values:
      CinderEnableNfsBackend: True
      CinderEnableIscsiBackend: False
      CinderNfsServers: '192.168.122.1:/export/cinder'
    description: |
      Configure and include this environment to enable the use of an NFS
      share as the backend for Cinder.
  -
    name: storage/glance-nfs
    title: Enable Glance NFS Backend
    files:
      puppet/services/glance-api.yaml:
        parameters:
          - GlanceBackend
          - GlanceNfsEnabled
          - GlanceNfsShare
          - GlanceNfsOptions
          - GlanceNetappNfsEnabled
          - NetappShareLocation
          - GlanceEnabledImportMethods
          - GlanceStagingNfsShare
          - GlanceNodeStagingUri
          - GlanceStagingNfsOptions
    sample_values:
      GlanceBackend: file
      GlanceNfsEnabled: True
    static:
      - GlanceBackend
      - GlanceNfsEnabled
    description: |
      Configure and include this environment to enable the use of an NFS
      share as the backend for Glance.
  -
    name: storage/nova-nfs
    title: Enable Nova NFS Backend
    files:
      puppet/services/nova-compute.yaml:
        parameters:
          - NovaNfsEnabled
          - NovaNfsShare
          - NovaNfsOptions
          - NovaNfsVersion
    sample_values:
      NovaNfsEnabled: True
      NovaNfsVersion: '"4.2"'
    static:
      - NovaNfsEnabled
    description: |
      Configure and include this environment to enable the use of an NFS
      share as the backend for Nova.
  -
    name: storage/external-ceph
    title: Deploy Using an External Ceph Cluster
    files:
      puppet/services/nova-compute.yaml:
        parameters:
          - NovaRbdPoolName
          - NovaEnableRbdBackend
          - CephClientUserName
      puppet/services/cinder-volume.yaml:
        parameters:
          - CinderRbdPoolName
          - CinderEnableIscsiBackend
          - CinderEnableRbdBackend
      puppet/services/glance-api.yaml:
        parameters:
          - GlanceRbdPoolName
          - GlanceBackend
      puppet/services/gnocchi-api.yaml:
        parameters:
          - GnocchiBackend
      puppet/services/gnocchi-base.yaml:
        parameters:
          - GnocchiRbdPoolName
      docker/services/ceph-ansible/ceph-external.yaml:
        parameters:
          - CephExternalMonHost
      docker/services/ceph-ansible/ceph-base.yaml:
        parameters:
          - CephClusterFSID
          - CephClientKey
    sample_values:
      CinderEnableIscsiBackend: False
      CinderEnableRbdBackend: True
      NovaEnableRbdBackend: True
      GlanceBackend: rbd
      GnocchiBackend: rbd
      NovaRbdPoolName: vms
      CinderRbdPoolName: volumes
      GlanceRbdPoolName: images
      GnocchiRbdPoolName: metrics
      CephClientUserName: openstack
    description: |
       A Heat environment file which can be used to enable the
       use of an externally managed Ceph cluster.
    resource_registry:
      OS::TripleO::Services::CephExternal: ../../docker/services/ceph-ansible/ceph-external.yaml
  -
    name: storage/cinder-netapp-config
    title: Enable the Cinder NetApp Backend
    description: |
      A Heat environment file which can be used to enable a
      a Cinder NetApp backend, configured via puppet
    files:
      puppet/services/cinder-backend-netapp.yaml:
        parameters: all
    static:
      - CinderEnableNetappBackend
    resource_registry:
      OS::TripleO::Services::CinderBackendNetApp: ../puppet/services/cinder-backend-netapp.yaml
