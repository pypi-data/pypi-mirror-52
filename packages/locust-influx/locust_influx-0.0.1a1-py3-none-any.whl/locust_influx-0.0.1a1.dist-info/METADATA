Metadata-Version: 2.1
Name: locust-influx
Version: 0.0.1a1
Summary: Report locust metrics to influxdb.
Home-page: https://github.com/lucrib/locust_influx
Author: Lucas Ribeiro
Author-email: lucasribeiro1990@gmail.com
License: Apache-2.0
Project-URL: Documentation, https://locust_influx.github.io
Project-URL: Source, https://github.com/lucrib/locust_influx
Platform: UNKNOWN
Classifier: Development Status :: 2 - Pre-Alpha
Classifier: Environment :: Plugins
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: Apache Software License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.6
Requires-Python: >=3.6
Description-Content-Type: text/markdown
Requires-Dist: locustio (==0.11.0)
Requires-Dist: influxdb (==5.2.2)
Requires-Dist: locust

# locust_influx

Send information about [locust](https://locust.io/) requests to influxdb.

Start a container of influxdb locally:

`docker run -d --name influxdb -d -p 8086:8086`

Start a container of grafana locally:

`docker run -d --name grafana -d -p 3000:3000`

Crete a new python venv:

`pip install locust_influx`

Create a test `locustfile.py`

```python
from locust import TaskSet, HttpLocust, task

from locust_influx import expose_metrics

expose_metrics()


class MyTasks(TaskSet):

    @task
    def get_home(self):
        self.client.get('/')

    @task
    def head_home(self):
        self.client.head('/')

    @task
    def delete_home(self):
        self.client.delete('/')

    @task
    def post_home(self):
        self.client.post('/.')

    @task
    def put_home(self):
        self.client.put('/')


class MyLocust(HttpLocust):
    task_set = MyTasks
```

Run locust (Change the host to point to desired one):

`locust -f ./locustfile.py --no-web --clients 10 --hatch-rate 1 --run-time 60s --host http://localhost:8080`

Open your local grafana in the browser at http://localhost:3000/

Import new dashboard from locust_dashboard.json file.

![Locust dashboard in grafana](https://raw.githubusercontent.com/lucrib/locust_influx/master/dashboard.png)


