Metadata-Version: 2.1
Name: plunger
Version: 1.0.1
Summary: A tool to inspect and clean gitlab's docker registry.
Home-page: https://github.com/factorysh/plunger
Author: Bearstech
Author-email: py@bearstech.com
License: GPLv3
Keywords: docker gitlab registry
Platform: UNKNOWN
Classifier: Intended Audience :: Developers
Classifier: Programming Language :: Python :: 3.5
Classifier: Programming Language :: Python :: 3.6
Classifier: Programming Language :: Python :: 3.7
Classifier: License :: OSI Approved :: GNU Affero General Public License v3
Classifier: Development Status :: 5 - Production/Stable
Requires-Dist: sentry-sdk
Requires-Dist: requests
Requires-Dist: pyjwt
Requires-Dist: cryptography
Requires-Dist: texttable
Provides-Extra: test
Requires-Dist: pytest ; extra == 'test'
Requires-Dist: pytest-cov ; extra == 'test'
Requires-Dist: responses ; extra == 'test'

Plunger
=======

A tool to inspect and clean gitlab's docker registry.

Installation
------------

Using pip::

   $ pip install plunger

Examples
--------

First export some env var to avoid reapeating command line arguments::

    $ export PLUNGER_REGISTRY=https://your.gitlab.registry/
    $ export PLUNGER_KEY_FILE=/path/to/your/key

Inspect the registry::

    $ # show size used by images, grouped by gitlab group
    $ plunger --list 1

    $ # show sizes only for a group
    $ plunger --list 2 --filter repository/

    $ # show sizes of all tags
    $ plunger --list 0 --filter repository/path/

Remove some images::

    $ # keep 4 latest tags for each repos
    $ plunger --keep 4

    $ # keep 2 latest tags for repos starting with 'repository/'
    $ plunger --keep 2 --filter repository/

    $ # remove all tags for repos starting with 'repository/path/'
    $ plunger --keep 0 --filter repository/path/


