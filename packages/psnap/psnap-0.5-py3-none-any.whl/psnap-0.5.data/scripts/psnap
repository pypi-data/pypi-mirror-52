#!python

"""
Process a saved json state file and corresponding Python script
to produce an output Python script with keywords expanded.

To run:
    psnap filename.json

Inputs/outputs:
    filename.json specifies input Python code ("code_src") and
    output with keyword expansion ("code_snap").
"""

import sys
from psnap import keyword_expander

def _psnap_main():
    if len(sys.argv) != 2:
        print(f"Usage: {sys.argv[0]} infile.json")
        return

    data = keyword_expander.KeywordExpander.expand_from_json_file(sys.argv[1])

    print(f"INFILE: {data['code_src']}")
    print(f"WROTE: {data['code_snap']}")

if __name__ == "__main__":
    _psnap_main()
