(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{1725:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1678),i=n(1267),o=n.n(i),l=n(44),s=l.c.div`
  /* React table style customization */
  width: 100%;

  .ReactTable .rt-thead.-header .rt-th {
    color: ${e=>"dark"===e.theme?"#bbb":"#111"};
    background-color: ${e=>"dark"===e.theme?"#1e1e1e":"#fff"};
  }
  .ReactTable.-striped .rt-tr.-odd > div {
    color: ${e=>"dark"===e.theme?"#bbb":"#111"};
    background-color: ${e=>"dark"===e.theme?"#1e1e1e":"#fff"};
  }

  .ReactTable.-striped .rt-tr.-even > div {
    color: ${e=>"dark"===e.theme?"#bbb":"#111"};
    background-color: ${e=>"dark"===e.theme?"#111":"#f7f7f7"};
  }

  .ReactTable.-highlight .rt-tbody .rt-tr:not(.-padRow):hover {
    /* 
    What does this selector do? 
    These classes were in our react-table style sheet previously
    color: var(--theme-app-fg);
    background: var(--cm-background); 
    */
  }

  .ReactTable .-pagination .-btn {
  }

  /* 
  These parts are mostly copied from the dependency packages, 
  but we remove some things that clash with us
  */
  ${'\n  \n  .ReactTable {\n    position: relative;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n    -ms-flex-direction: column;\n    flex-direction: column;\n    border: 1px solid rgba(0, 0, 0, 0.1);\n  }\n  .ReactTable * {\n    box-sizing: border-box;\n  }\n  .ReactTable .rt-table {\n    -webkit-box-flex: 1;\n    -ms-flex: auto 1;\n    flex: auto 1;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n    -ms-flex-direction: column;\n    flex-direction: column;\n    -webkit-box-align: stretch;\n    -ms-flex-align: stretch;\n    align-items: stretch;\n    width: 100%;\n    border-collapse: collapse;\n    overflow: auto;\n  }\n  .ReactTable .rt-thead {\n    -webkit-box-flex: 1;\n    -ms-flex: 1 0 auto;\n    flex: 1 0 auto;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n    -ms-flex-direction: column;\n    flex-direction: column;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n  }\n  .ReactTable .rt-thead.-headerGroups {\n    background: rgba(0, 0, 0, 0.03);\n    border-bottom: 1px solid rgba(0, 0, 0, 0.05);\n  }\n  .ReactTable .rt-thead.-filters {\n    border-bottom: 1px solid rgba(0, 0, 0, 0.05);\n  }\n  .ReactTable .rt-thead.-filters input,\n  .ReactTable .rt-thead.-filters select {\n    border: 1px solid rgba(0, 0, 0, 0.1);\n    background: #fff;\n    padding: 5px 7px;\n    font-size: inherit;\n    border-radius: 3px;\n    font-weight: normal;\n    outline: none;\n  }\n  .ReactTable .rt-thead.-filters .rt-th {\n    border-right: 1px solid rgba(0, 0, 0, 0.02);\n  }\n  .ReactTable .rt-thead.-header {\n    box-shadow: 0 2px 15px 0 rgba(0, 0, 0, 0.15);\n  }\n  .ReactTable .rt-thead .rt-tr {\n    text-align: center;\n  }\n  .ReactTable .rt-thead .rt-th,\n  .ReactTable .rt-thead .rt-td {\n    padding: 5px 5px;\n    line-height: normal;\n    position: relative;\n    border-right: 1px solid rgba(0, 0, 0, 0.05);\n    transition: box-shadow 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);\n    box-shadow: inset 0 0 0 0 transparent;\n  }\n  .ReactTable .rt-thead .rt-th.-sort-asc,\n  .ReactTable .rt-thead .rt-td.-sort-asc {\n    box-shadow: inset 0 3px 0 0 rgba(0, 0, 0, 0.6);\n  }\n  .ReactTable .rt-thead .rt-th.-sort-desc,\n  .ReactTable .rt-thead .rt-td.-sort-desc {\n    box-shadow: inset 0 -3px 0 0 rgba(0, 0, 0, 0.6);\n  }\n  .ReactTable .rt-thead .rt-th.-cursor-pointer,\n  .ReactTable .rt-thead .rt-td.-cursor-pointer {\n    cursor: pointer;\n  }\n  .ReactTable .rt-thead .rt-th:last-child,\n  .ReactTable .rt-thead .rt-td:last-child {\n    border-right: 0;\n  }\n  .ReactTable .rt-thead .rt-resizable-header {\n    overflow: visible;\n  }\n  .ReactTable .rt-thead .rt-resizable-header:last-child {\n    overflow: hidden;\n  }\n  .ReactTable .rt-thead .rt-resizable-header-content {\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n  .ReactTable .rt-thead .rt-header-pivot {\n    border-right-color: #f7f7f7;\n  }\n  .ReactTable .rt-thead .rt-header-pivot:after,\n  .ReactTable .rt-thead .rt-header-pivot:before {\n    left: 100%;\n    top: 50%;\n    border: solid transparent;\n    content: " ";\n    height: 0;\n    width: 0;\n    position: absolute;\n    pointer-events: none;\n  }\n  .ReactTable .rt-thead .rt-header-pivot:after {\n    border-color: rgba(255, 255, 255, 0);\n    border-left-color: #fff;\n    border-width: 8px;\n    margin-top: -8px;\n  }\n  .ReactTable .rt-thead .rt-header-pivot:before {\n    border-color: rgba(102, 102, 102, 0);\n    border-left-color: #f7f7f7;\n    border-width: 10px;\n    margin-top: -10px;\n  }\n  .ReactTable .rt-tbody {\n    -webkit-box-flex: 99999;\n    -ms-flex: 99999 1 auto;\n    flex: 99999 1 auto;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n    -ms-flex-direction: column;\n    flex-direction: column;\n    overflow: auto;\n  }\n  .ReactTable .rt-tbody .rt-tr-group {\n    border-bottom: solid 1px rgba(0, 0, 0, 0.05);\n  }\n  .ReactTable .rt-tbody .rt-tr-group:last-child {\n    border-bottom: 0;\n  }\n  .ReactTable .rt-tbody .rt-td {\n    border-right: 1px solid rgba(0, 0, 0, 0.02);\n  }\n  .ReactTable .rt-tbody .rt-td:last-child {\n    border-right: 0;\n  }\n  .ReactTable .rt-tbody .rt-expandable {\n    cursor: pointer;\n    text-overflow: clip;\n  }\n  .ReactTable .rt-tr-group {\n    -webkit-box-flex: 1;\n    -ms-flex: 1 0 auto;\n    flex: 1 0 auto;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n    -ms-flex-direction: column;\n    flex-direction: column;\n    -webkit-box-align: stretch;\n    -ms-flex-align: stretch;\n    align-items: stretch;\n  }\n  .ReactTable .rt-tr {\n    -webkit-box-flex: 1;\n    -ms-flex: 1 0 auto;\n    flex: 1 0 auto;\n    display: -webkit-inline-box;\n    display: -ms-inline-flexbox;\n    display: inline-flex;\n  }\n  .ReactTable .rt-th,\n  .ReactTable .rt-td {\n    -webkit-box-flex: 1;\n    -ms-flex: 1 0 0px;\n    flex: 1 0 0;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    padding: 7px 5px;\n    overflow: hidden;\n    transition: 0.3s ease;\n    transition-property: width, min-width, padding, opacity;\n  }\n  .ReactTable .rt-th.-hidden,\n  .ReactTable .rt-td.-hidden {\n    width: 0 !important;\n    min-width: 0 !important;\n    padding: 0 !important;\n    border: 0 !important;\n    opacity: 0 !important;\n  }\n  .ReactTable .rt-expander {\n    display: inline-block;\n    position: relative;\n    margin: 0;\n    color: transparent;\n    margin: 0 10px;\n  }\n  .ReactTable .rt-expander:after {\n    content: "";\n    position: absolute;\n    width: 0;\n    height: 0;\n    top: 50%;\n    left: 50%;\n    -webkit-transform: translate(-50%, -50%) rotate(-90deg);\n    transform: translate(-50%, -50%) rotate(-90deg);\n    border-left: 5.04px solid transparent;\n    border-right: 5.04px solid transparent;\n    border-top: 7px solid rgba(0, 0, 0, 0.8);\n    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);\n    cursor: pointer;\n  }\n  .ReactTable .rt-expander.-open:after {\n    -webkit-transform: translate(-50%, -50%) rotate(0);\n    transform: translate(-50%, -50%) rotate(0);\n  }\n  .ReactTable .rt-resizer {\n    display: inline-block;\n    position: absolute;\n    width: 36px;\n    top: 0;\n    bottom: 0;\n    right: -18px;\n    cursor: col-resize;\n    z-index: 10;\n  }\n  .ReactTable .rt-tfoot {\n    -webkit-box-flex: 1;\n    -ms-flex: 1 0 auto;\n    flex: 1 0 auto;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n    -ms-flex-direction: column;\n    flex-direction: column;\n    box-shadow: 0 0 15px 0 rgba(0, 0, 0, 0.15);\n  }\n  .ReactTable .rt-tfoot .rt-td {\n    border-right: 1px solid rgba(0, 0, 0, 0.05);\n  }\n  .ReactTable .rt-tfoot .rt-td:last-child {\n    border-right: 0;\n  }\n  .ReactTable.-highlight .rt-tbody .rt-tr:not(.-padRow):hover {\n    background: rgba(0, 0, 0, 0.05);\n  }\n  .ReactTable .-pagination {\n    z-index: 1;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: justify;\n    -ms-flex-pack: justify;\n    justify-content: space-between;\n    -webkit-box-align: stretch;\n    -ms-flex-align: stretch;\n    align-items: stretch;\n    -ms-flex-wrap: wrap;\n    flex-wrap: wrap;\n    padding: 3px;\n    box-shadow: 0 0 15px 0 rgba(0, 0, 0, 0.1);\n    border-top: 2px solid rgba(0, 0, 0, 0.1);\n  }\n  .ReactTable .-pagination input,\n  .ReactTable .-pagination select {\n    border: 1px solid rgba(0, 0, 0, 0.1);\n    background: #fff;\n    padding: 5px 7px;\n    font-size: inherit;\n    border-radius: 3px;\n    font-weight: normal;\n    outline: none;\n  }\n  .ReactTable .-pagination .-btn {\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    appearance: none;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border: 0;\n    border-radius: 3px;\n    padding: 6px;\n    font-size: 1em;\n    transition: all 0.1s ease;\n    cursor: pointer;\n    outline: none;\n  }\n  .ReactTable .-pagination .-btn[disabled] {\n    opacity: 0.5;\n    cursor: default;\n  }\n  .ReactTable .-pagination .-btn:not([disabled]):hover {\n    background: rgba(0, 0, 0, 0.3);\n    color: #fff;\n  }\n  .ReactTable .-pagination .-previous,\n  .ReactTable .-pagination .-next {\n    -webkit-box-flex: 1;\n    -ms-flex: 1;\n    flex: 1;\n    text-align: center;\n  }\n  .ReactTable .-pagination .-center {\n    -webkit-box-flex: 1.5;\n    -ms-flex: 1.5;\n    flex: 1.5;\n    text-align: center;\n    margin-bottom: 0;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: normal;\n    -ms-flex-direction: row;\n    flex-direction: row;\n    -ms-flex-wrap: wrap;\n    flex-wrap: wrap;\n    -webkit-box-align: center;\n    -ms-flex-align: center;\n    align-items: center;\n    -ms-flex-pack: distribute;\n    justify-content: space-around;\n  }\n  .ReactTable .-pagination .-pageInfo {\n    display: inline-block;\n    margin: 3px 10px;\n    white-space: nowrap;\n  }\n  .ReactTable .-pagination .-pageJump {\n    display: inline-block;\n  }\n  .ReactTable .-pagination .-pageJump input {\n    width: 70px;\n    text-align: center;\n  }\n  .ReactTable .-pagination .-pageSizeOptions {\n    margin: 3px 10px;\n  }\n  .ReactTable .rt-noData {\n    display: block;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    -webkit-transform: translate(-50%, -50%);\n    transform: translate(-50%, -50%);\n    background: rgba(255, 255, 255, 0.8);\n    transition: all 0.3s ease;\n    z-index: 1;\n    pointer-events: none;\n    padding: 20px;\n    color: rgba(0, 0, 0, 0.5);\n  }\n  .ReactTable .-loading {\n    display: block;\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    background: rgba(255, 255, 255, 0.8);\n    transition: all 0.3s ease;\n    z-index: -1;\n    opacity: 0;\n    pointer-events: none;\n  }\n  .ReactTable .-loading > div {\n    position: absolute;\n    display: block;\n    text-align: center;\n    width: 100%;\n    top: 50%;\n    left: 0;\n    font-size: 15px;\n    color: rgba(0, 0, 0, 0.6);\n    -webkit-transform: translateY(-52%);\n    transform: translateY(-52%);\n    transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n  }\n  .ReactTable .-loading.-active {\n    opacity: 1;\n    z-index: 2;\n    pointer-events: all;\n  }\n  .ReactTable .-loading.-active > div {\n    -webkit-transform: translateY(50%);\n    transform: translateY(50%);\n  }\n  .ReactTable .rt-resizing .rt-th,\n  .ReactTable .rt-resizing .rt-td {\n    transition: none !important;\n    cursor: col-resize;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n  }\n'}
  ${"\n\n  .rthfc .rt-thead.-headerGroups,\n  .rthfc .rt-thead.-header {\n    z-index: 3;\n  }\n\n  .rthfc .rt-thead.-filters {\n    z-index: 2;\n  }\n\n  .rthfc .rt-th,\n  .rthfc .rt-td {\n    \n  }\n\n  .rthfc .-headerGroups .rt-th {\n    \n  }\n\n  .rthfc.-striped .rt-tr.-odd .rt-td {\n    \n  }\n\n  .rthfc.-highlight .rt-tr:hover .rt-td {\n    \n  }\n\n  .rthfc .-filters .rt-th.rthfc-th-fixed-left-last,\n  .rthfc .rt-th.rthfc-th-fixed-left-last,\n  .rthfc .rt-td.rthfc-td-fixed-left-last {\n    border-right: solid 1px;\n  }\n\n  .rthfc .rt-th.rthfc-th-fixed-right-first,\n  .rthfc .rt-td.rthfc-td-fixed-right-first {\n    border-left: solid 1px;\n  }\n\n  /*------------ Sticky position version: -sp ------------*/\n\n  .rthfc.-sp .rt-tbody {\n    overflow: visible;\n    flex: 1 0 auto;\n  }\n\n  .rthfc.-sp .rt-thead {\n    position: -webkit-sticky;\n    position: sticky;\n  }\n\n  .rthfc.-sp .rt-thead.-headerGroups {\n    \n  }\n\n  .rthfc.-sp .rt-tfoot {\n    position: -webkit-sticky;\n    position: sticky;\n    z-index: 1;\n    bottom: 0px;\n  }\n\n  .rthfc.-sp .rthfc-th-fixed,\n  .rthfc.-sp .rthfc-td-fixed {\n    position: -webkit-sticky;\n    position: sticky;\n    z-index: 1;\n  }\n\n  .rthfc.-sp .rthfc-th-fixed-left,\n  .rthfc.-sp .rthfc-td-fixed-left {\n    left: 0;\n  }\n\n  .rthfc.-sp .rthfc-th-fixed-right,\n  .rthfc.-sp .rthfc-td-fixed-right {\n    left: 0;\n  }\n\n  /*------------ scroll event version: -se ------------*/\n\n  .rthfc.-se .-header .rt-th.rthfc-th-fixed,\n  .rthfc.-se .-headerGroups .rt-th.rthfc-th-fixed,\n  .rthfc.-se .-filters .rt-th.rthfc-th-fixed,\n  .rthfc.-se .rt-td.rthfc-td-fixed {\n    position: relative;\n    z-index: 1;\n  }\n"}
`;const c=o()(a.a),p=e=>{return{"=":">",">":"<","<":"="}[e]},d=e=>{const{filterState:t,filterName:n,updateFunction:a,onChange:i}=e,o=t[n]||"=";return r.createElement("form",{style:{border:"1px solid gray",background:"white",borderRadius:"5px",width:"100%"}},r.createElement("input",{type:"text",id:"name",name:"user_name",style:{width:"calc(100% - 30px)",border:"none"},onChange:e=>{i(e.currentTarget.value)},placeholder:"number"}),r.createElement("button",{onClick:()=>{a({[n]:p(o)})}},o))},m=(e,t,n)=>({onChange:a})=>r.createElement(d,{onChange:a,filterState:e,filterName:t,updateFunction:n}),h=(e="=")=>(t,n)=>{const r=Number(t.value);return"="===e?n[t.id]===r:"<"===e?n[t.id]<r:">"===e?n[t.id]>r:n[t.id]},u={integer:m,number:m,string:()=>({onChange:e})=>r.createElement("form",null,r.createElement("input",{type:"text",id:"string-filter",name:"string-filter",onChange:t=>{e(t.currentTarget.value)},placeholder:"string"}))},b={integer:h,number:h,string:()=>(e,t)=>-1!==t[e.id].toLowerCase().indexOf(e.value.toLowerCase())};class g extends r.PureComponent{constructor(e){super(e),this.state={filters:{},showFilters:!1}}render(){const{data:{data:e,schema:t},height:n,theme:a}=this.props,{filters:i,showFilters:o}=this.state,{primaryKey:l=[]}=t,p=t.fields.map(e=>"string"===e.type||"number"===e.type||"integer"===e.type?{Header:e.name,accessor:e.name,fixed:-1!==l.indexOf(e.name)&&"left",filterMethod:(t,n)=>{if("string"===e.type||"number"===e.type||"integer"===e.type)return b[e.type](i[e.name])(t,n)},Filter:u[e.type](i,e.name,e=>{this.setState({filters:Object.assign({},i,e)})})}:{Header:e.name,id:e.name,accessor:t=>"boolean"===e.type?t[e.name].toString():t[e.name],fixed:-1!==l.indexOf(e.name)&&"left"});return r.createElement(s,{theme:a},r.createElement("button",{onClick:()=>this.setState({showFilters:!o})},o?"Hide":"Show"," Filters"),r.createElement(c,{data:e,columns:p,style:{height:`${n}px`},className:"-striped -highlight",filterable:o}))}}g.defaultProps={metadata:{},height:500};var y=g,f=n(371),x=n(230),k=n(1360);const w=l.c.div`
  & {
    margin: 30px 0;
    padding: 30px;
    border: 1px solid #ccc;
    border-radius: 5px;
    position: relative;
  }
  .close {
    position: absolute;
    top: 15px;
    right: 15px;
    cursor: pointer;
    opacity: 0.5;
    font-size: 40px;
    line-height: 22px;
  }
  .close:hover {
    opacity: 1;
  }
  .grid-wrapper {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-gap: 20px;
  }
  h3 {
    margin: 0 0 20px;
  }
  .box {
    cursor: pointer;
    width: 30px;
    height: 30px;
    border-radius: 5px;
    display: inline-block;
    margin: 0 20px 20px 0;
  }
  textarea {
    height: 184px;
    width: 100%;
    box-sizing: border-box;
    margin-bottom: 20px;
    padding: 5px;
    font-size: 14px;
    border-color: #ccc;
  }
`,E=l.c.div`
   {
    width: 225px;
  }
`,v=l.c.div`
   {
    margin-top: 30px;
  }
`,T=l.c.button`
  & {
    margin: 0 20px 10px 0;
    -webkit-appearance: none;
    padding: 5px 15px;
    background: white;
    border: 1px solid #bbb;
    border-radius: 3px;
    cursor: pointer;
    text-transform: uppercase;
    font-size: 14px;
    color: #555;
  }
  &:hover {
    border-color: #888;
    color: #222;
  }
`;class C extends r.PureComponent{constructor(e){super(e),this.openClose=(()=>{this.setState({open:!this.state.open,colors:this.props.colors.join(",\n")})}),this.handleChange=((e,t)=>{this.setState({selectedColor:e,selectedPosition:t})}),this.pickerChange=(e=>{const{colors:t}=this.props;t[this.state.selectedPosition]=e.hex,this.props.updateColor(t),this.setState({selectedColor:e.hex,colors:t.join(",\n")})}),this.colorsFromTextarea=(()=>{const e=this.state.colors.replace(/\"/g,"").replace(/ /g,"").replace(/\[/g,"").replace(/\]/g,"").replace(/\r?\n|\r/g,"").split(",");this.props.updateColor(e)}),this.updateTextArea=(e=>{this.setState({colors:e.target.value})}),this.state={open:!1,selectedColor:e.colors[0],selectedPosition:0,colors:e.colors.join(",\n")}}render(){if(!this.state.open)return r.createElement("div",{style:{display:"inline-block"}},r.createElement(T,{onClick:this.openClose},"Adjust Palette"));const{colors:e}=this.props;return r.createElement(w,null,r.createElement("div",{className:"close",role:"button",tabIndex:0,onClick:this.openClose,onKeyPress:e=>{13===e.keyCode&&this.openClose()}},"Ã—"),r.createElement("div",{className:"grid-wrapper"},r.createElement("div",null,r.createElement("h3",null,"Select Color"),e.map((e,t)=>r.createElement("div",{key:`color-${t}`,className:"box",style:{background:e},role:"button",tabIndex:0,onKeyPress:n=>{13===n.keyCode&&this.handleChange(e,t)},onClick:()=>this.handleChange(e,t)}))),r.createElement("div",null,r.createElement("h3",null,"Adjust Color"),r.createElement(E,null,r.createElement(k.ChromePicker,{color:this.state.selectedColor,onChangeComplete:this.pickerChange}))),r.createElement("div",null,r.createElement("h3",null,"Paste New Colors"),r.createElement("textarea",{value:this.state.colors,onChange:this.updateTextArea}),r.createElement(T,{onClick:this.colorsFromTextarea},"Update Colors"))),r.createElement(v,null,r.createElement("a",{href:`http://projects.susielu.com/viz-palette?colors=[${e.map(e=>`"${e}"`).join(",")}]&backgroundColor="white"&fontColor="black"`},"Evaluate This Palette with VIZ PALETTE")))}}C.defaultProps={metadata:{},height:500};var M=C;const R=l.c.span`
  & {
    display: inline-block;
    width: 20px;
    height: 20px;
    margin-right: 5px;
    border-radius: 20px;
    margin-bottom: -5px;
  }
`,S=l.c.span`
  & {
    display: inline-block;
    min-width: 80px;
    margin: 5px;
  }
`,O=l.c.div`
  & {
    margin-top: 20px;
  }
`;var j=({values:e,colorHash:t,valueHash:n,colors:a=[],setColor:i})=>{return r.createElement(O,null,(e.length>18?[...e.filter((e,t)=>t<18),"Other"]:e).map((e,a)=>t[e]&&r.createElement(S,{key:`legend-item-${a}`},r.createElement(R,{style:{background:t[e]}}),r.createElement("span",{className:"html-legend-item"},e),n[e]&&n[e]>1&&`(${n[e]})`||"")),i&&r.createElement(M,{colors:a,updateColor:e=>{i(e)}}))};var z=l.c.div.attrs(e=>({style:{transform:`translate(\n      ${e.x<200?"0px":"calc(-50% + 7px)"},\n      ${e.y<200?"10px":"calc(-100% - 10px)"}\n    )`}}))`
  color: black;
  padding: 10px;
  z-index: 999999;
  min-width: 120px;
  background: white;
  border: 1px solid #888;
  border-radius: 5px;
  position: relative;

  & p {
    font-size: 14px;
  }

  & h3 {
    margin: 0 0 10px;
  }

  &:before {
    ${e=>e.x<200?null:e.y<200?'\n      border-left: inherit;\n      border-top: inherit;\n      top: -8px;\n      left: calc(50% - 15px);\n      background: inherit;\n      content: "";\n      padding: 0px;\n      transform: rotate(45deg);\n      width: 15px;\n      height: 15px;\n      position: absolute;\n      z-index: 99;\n    ':'\n    border-right: inherit;\n    border-bottom: inherit;\n    bottom: -8px;\n    left: calc(50% - 15px);\n    background: inherit;\n    content: "";\n    padding: 0px;\n    transform: rotate(45deg);\n    width: 15px;\n    height: 15px;\n    position: absolute;\n    z-index: 99;\n  '}
  }
`,$=n(1452),G=n.n($);function P(e){let t="0.[00]a";return 0===e?"0":(e>1e14||e<1e-5?t="0.[000]e+0":e<1&&(t="0.[0000]a"),G()(e).format(t))}const A=l.c.p`
  margin: 20px 0 5px;
`,D=l.c.g`
  & text {
    text-anchor: end;
  }

  & :first-child {
    fill: white;
    stroke: white;
    opacity: 0.75;
    stroke-width: 2;
  }
`,L=[40,380];class F extends r.Component{constructor(e){super(e),this.brushing=((e,t)=>{const n=this.state.columnExtent;n[t]=e,this.setState({columnExtent:n})});const{options:t,data:n,schema:r}=this.props,{primaryKey:a}=t,i=function(e,t,n,r){const a={},i={};t.forEach(t=>{const n=[Math.min(...e.map(e=>e[t.name])),Math.max(...e.map(e=>e[t.name]))],r=Object(x.a)().domain(n).range([0,1]);a[t.name]=r;const o=Object(x.a)().domain(n).range([380,0]);i[t.name]=o});const o=[];return e.forEach(e=>{t.forEach(t=>{const i={metric:t.name,rawvalue:e[t.name],pctvalue:a[t.name](e[t.name])};n.forEach(t=>{"string"===t.type&&(i[t.name]=e[t.name])}),r.forEach(t=>{i[t]=e[t]}),o.push(i)})}),{dataPieces:o,scales:i}}(n,t.metrics,r.fields,a);this.state={filterMode:!0,data:i.dataPieces,dataScales:i.scales,columnExtent:t.metrics.reduce((e,t)=>(e[t.name]=[-1/0,1/0],e),{})}}shouldComponentUpdate(){return!0}render(){const{options:e,data:t}=this.props,{primaryKey:n,metrics:a,chart:i,colors:o,setColor:l}=e,{dim1:s}=i,{columnExtent:c,filterMode:p}=this.state,d=new Map;Object.keys(c).forEach(e=>{const t=c[e].sort((e,t)=>e-t);this.state.data.filter(n=>n.metric===e&&(n.pctvalue<t[0]||n.pctvalue>t[1])).forEach(e=>{d.set(n.map(t=>e[t]).join(","),!0)})});const m={},h=t.filter(e=>!d.get(n.map(t=>e[t]).join(","))),u=h.map(e=>n.map(t=>e[t]).join(" - ")),b={Other:"grey"};if(s&&"none"!==s){const{uniqueValues:e,valueHash:n}=h.reduce((e,t)=>{const n=t[s];return e.valueHash[n]=e.valueHash[n]&&e.valueHash[n]+1||1,e.uniqueValues=!e.uniqueValues.find(e=>e===n)&&[...e.uniqueValues,n]||e.uniqueValues,e},{uniqueValues:[],valueHash:{}});t.reduce((e,t)=>-1===e.indexOf(t[s])?[...e,t[s]]:e,[]).forEach((e,t)=>{b[e]=o[t%o.length]}),m.afterElements=e.length<=18?r.createElement(j,{values:e,colorHash:b,valueHash:n,setColor:l}):r.createElement(A,null,u.length," items")}return p||(m.annotations=a.map(e=>({label:"",metric:e.name,type:"enclose-rect",color:"green",disable:["connector"],coordinates:[{metric:e.name,pctvalue:c[e.name][0]},{metric:e.name,pctvalue:c[e.name][1]}]})).filter(e=>0!==e.coordinates[0].pctvalue||1!==e.coordinates[1].pctvalue)),r.createElement("div",null,r.createElement("div",null,r.createElement("button",{className:`button-text ${p?"selected":""}`,onClick:()=>this.setState({filterMode:!0})},"Filter"),r.createElement("button",{className:`button-text ${p?"":"selected"}`,onClick:()=>this.setState({filterMode:!1})},"Explore")),r.createElement(f.ResponsiveOrdinalFrame,Object.assign({data:this.state.data,oAccessor:"metric",rAccessor:"pctvalue",type:{type:"point",r:2},connectorType:e=>n.map(t=>e[t]).join(","),style:e=>({fill:d.get(n.map(t=>e[t]).join(","))?"lightgray":b[e[s]],opacity:d.get(n.map(t=>e[t]).join(","))?.15:.99}),connectorStyle:e=>({stroke:d.get(n.map(t=>e.source[t]).join(","))?"gray":b[e.source[s]],strokeWidth:d.get(n.map(t=>e.source[t]).join(","))?1:1.5,strokeOpacity:d.get(n.map(t=>e.source[t]).join(","))?.1:1}),responsiveWidth:!0,margin:{top:20,left:20,right:20,bottom:100},oPadding:40,pixelColumnWidth:80,interaction:p?{columnsBrush:!0,during:this.brushing,extent:Object.keys(this.state.columnExtent)}:null,pieceHoverAnnotation:!p,tooltipContent:e=>{const t=d.get(n.map(t=>e[t]).join(","))?"grey":b[e[s]];return r.createElement(z,{x:e.x,y:e.y},r.createElement("h3",null,n.map(t=>e[t]).join(", ")),e[s]&&r.createElement("h3",{style:{color:t}},s,": ",e[s]),r.createElement("p",null,e.metric,": ",e.rawvalue))},canvasPieces:!0,canvasConnectors:!0,oLabel:e=>r.createElement("g",null,r.createElement("text",{transform:"rotate(45)"},e),r.createElement("g",{transform:"translate(-20,-395)"},r.createElement(f.Axis,{scale:this.state.dataScales[e],size:L,orient:"left",ticks:5,tickFormat:e=>r.createElement(D,null,r.createElement("text",null,P(e)),r.createElement("text",null,P(e)))})))},m)))}}F.defaultProps={metadata:{},height:500};var N=F;function H(e,t){return"function"==typeof t?t(e):e[t]}const B=(e,t,n,r)=>{const a={};let i=[];return r.forEach(n=>{const r=H(n,e);a[r]||(a[r]={array:[],value:0,label:r},i.push(a[r])),a[r].array.push(n),a[r].value+=H(n,t)}),i=i.sort((e,t)=>t.value===e.value?e.label<t.label?-1:(e.label,t.label,1):t.value-e.value),"none"!==n&&i.forEach(e=>{e.array=e.array.sort((e,t)=>H(t,n)-H(e,n))}),i.reduce((e,t)=>[...e,...t.array],[])};var V=n(142),Z=n(69);const W=(e,t)=>t=e.parent?W(e.parent,[e.key,...t]):["root",...t],K=(e,t)=>{if(0===t.depth)return"white";if(1===t.depth)return e[t.key];let n=t;for(let e=t.depth;e>1;e--)n=n.parent;return Object(Z.interpolateLab)("white",e[n.key])(Math.max(0,t.depth/6))};var Y=n(85);const I=Object(x.a)().domain([5,30]).range([8,16]).clamp(!0),U={force:e=>t=>({fill:e[t.source.id],stroke:e[t.source.id],strokeOpacity:.25}),sankey:e=>t=>({fill:e[t.source.id],stroke:e[t.source.id],strokeOpacity:.25}),matrix:e=>t=>({fill:e[t.source.id],stroke:"none"}),arc:e=>t=>({fill:"none",stroke:e[t.source.id],strokeWidth:t.weight||1,strokeOpacity:.75})},X={force:e=>t=>({fill:e[t.id],stroke:e[t.id],strokeOpacity:.5}),sankey:e=>t=>({fill:e[t.id],stroke:e[t.id],strokeOpacity:.5}),matrix:e=>e=>({fill:"none",stroke:"#666",strokeOpacity:1}),arc:e=>t=>({fill:e[t.id],stroke:e[t.id],strokeOpacity:.5})},q=[{type:"frame-hover"},{type:"highlight",style:{stroke:"red",strokeOpacity:.5,strokeWidth:5,fill:"none"}}],J={force:q,sankey:q,matrix:[{type:"frame-hover"},{type:"highlight",style:{fill:"red",fillOpacity:.5}}],arc:q},_={none:!1,static:!0,scaled:e=>!e.nodeSize||e.nodeSize<5?null:r.createElement("text",{textAnchor:"middle",y:I(e.nodeSize)/2,fontSize:`${I(e.nodeSize)}px`},e.id)},Q=Object(x.a)().domain([8,25]).range([14,8]).clamp(!0),ee=l.c.div`
  font-size: 14px;
  text-transform: uppercase;
  margin: 5px;
  font-weight: 900;
`,te=l.c.div`
  fontsize: 12px;
  texttransform: uppercase;
  margin: 5px;
`,ne={heatmap:f.heatmapping,hexbin:f.hexbinning},re=Object(x.b)().domain([.01,.2,.4,.6,.8]).range(["none","#FBEEEC","#f3c8c2","#e39787","#ce6751","#b3331d"]);const ae=(e,t,n,a="scatterplot")=>{const i=n.height-150||500,{chart:o,primaryKey:l,colors:s,setColor:c,dimensions:p,trendLine:d,marginalGraphics:m}=n,{dim1:h,dim2:u,dim3:b,metric1:g,metric2:y,metric3:f}=o,k=e.filter(e=>e[g]&&e[y]&&(!f||"none"===f||e[f]));let w=()=>5;const E={Other:"grey"},v={};let T;if(u&&"none"!==u){const e=[...k].sort((e,t)=>t[g]-e[g]).filter((e,t)=>t<3),t=[...k].sort((e,t)=>t[y]-e[y]).filter(t=>-1===e.indexOf(t)).filter((e,t)=>t<3);T=function(e,t,n){const r=[],a={};return[...e,...t].forEach(e=>{const t=a[e[n]];if(t){const r=t.coordinates&&[...t.coordinates,e]||[e,t];Object.keys(a[e[n]]).forEach(t=>{delete a[e[n]][t]}),a[e[n]].id=e[n],a[e[n]].label=e[n],a[e[n]].type="react-annotation",a[e[n]].coordinates=r}else a[e[n]]=Object.assign({type:"react-annotation",label:e[n],id:e[n],coordinates:[]},e),r.push(a[e[n]])}),r}(e,t,u)}if(T=void 0,f&&"none"!==f){const e=Math.min(...k.map(e=>e[f])),t=Math.max(...k.map(e=>e[f]));w=Object(x.a)().domain([e,t]).range([2,20])}const C=B(g,"none"!==f&&f||y,"none",e);if(("scatterplot"===a||"contour"===a)&&h&&"none"!==h){const e=C.reduce((e,t)=>!e.find(e=>e===t[h].toString())&&[...e,t[h].toString()]||e,[]);e.forEach((e,t)=>{E[e]=t>18?"grey":s[t%s.length]}),v.afterElements=r.createElement(j,{valueHash:{},values:e,colorHash:E,setColor:c,colors:s})}let M=[];if("heatmap"===a||"hexbin"===a||"contour"===a&&"none"===b){if(M=[{coordinates:k}],"contour"!==a){const e=ne[a]({summaryType:{type:a,bins:10},data:{coordinates:k.map(e=>Object.assign({},e,{x:e[g],y:e[y]}))},size:[i,i]});M=e;const t=[.2,.4,.6,.8,1].map(t=>Math.floor(e.binMax*t)).reduce((e,t)=>0===t||-1!==e.indexOf(t)?e:[...e,t],[]),n=[0,...t],o=[];n.forEach((e,t)=>{const r=n[t+1];r&&o.push(`${e+1} - ${r}`)});const l=["#FBEEEC","#f3c8c2","#e39787","#ce6751","#b3331d"],p={};o.forEach((e,t)=>{p[e]=l[t]}),re.domain([.01,...t]).range(["none",...l.filter((e,n)=>n<t.length)]),v.afterElements=r.createElement(j,{valueHash:{},values:o,colorHash:p,colors:s,setColor:c})}}else if("contour"===a){const e={};M=[],k.forEach(t=>{e[t[h]]||(e[t[h]]={label:t[h],color:E[t[h]],coordinates:[]},M.push(e[t[h]])),e[t[h]].coordinates.push(t)})}const R=("scatterplot"===a||"contour"===a)&&e.length>999;let S,O=[];"none"!==m&&"scatterplot"===a&&(O=[{orient:"right",tickLineGenerator:()=>r.createElement("g",null),tickFormat:()=>"",marginalSummaryType:{type:m,showPoints:!R}},{orient:"top",tickLineGenerator:()=>r.createElement("g",null),tickFormat:()=>"",marginalSummaryType:{type:m,showPoints:!R}}]),"scatterplot"===a&&"none"!==d?S={type:"trendline",regressionType:d}:"scatterplot"!==a&&(S={type:a,bins:10,thresholds:"none"===b?6:3});const $=Object.assign({xAccessor:"hexbin"===a||"heatmap"===a?"x":g,yAccessor:"hexbin"===a||"heatmap"===a?"y":y,axes:[{orient:"left",ticks:6,label:y,tickFormat:P,baseline:"scatterplot"===a,tickSize:"heatmap"===a?0:void 0},{orient:"bottom",ticks:6,label:g,tickFormat:P,footer:"heatmap"===a,baseline:"scatterplot"===a,tickSize:"heatmap"===a?0:void 0},...O],points:("scatterplot"===a||"contour"===a)&&e,canvasPoints:R,summaryType:S,summaryStyle:e=>"scatterplot"===a?{stroke:"darkred",strokeWidth:2,fill:"none"}:{fill:"contour"===a?"none":re((e.binItems||e.data).length),stroke:"contour"!==a?void 0:"none"===b?"#BBB":e.parentSummary.color,strokeWidth:"contour"===a?2:1},pointStyle:e=>({r:R?2:"contour"===a?3:w(e[f]),fill:E[e[h]]||"black",fillOpacity:.75,stroke:R?"none":"contour"===a?"white":"black",strokeWidth:"contour"===a?.5:1,strokeOpacity:.9}),hoverAnnotation:!0,responsiveWidth:!1,size:[i+105,i+80],margin:{left:75,bottom:50,right:30,top:30},annotations:"scatterplot"===a&&T||void 0,annotationSettings:{layout:{type:"marginalia",orient:"right",marginOffset:30}},tooltipContent:("hexbin"===a||"heatmap"===a)&&(e=>{const t=e.binItems||e.data||[];return 0===t.length?null:r.createElement(z,{x:e.x,y:e.y},r.createElement(ee,null,"ID, ",g,", ",y),t.map((e,t)=>{const n=p.map(t=>e[t.name].toString&&e[t.name].toString()||e[t.name]).join(",");return r.createElement(te,{key:n+t},n,", ",e[g],", ",e[y])}))})||(e=>r.createElement(z,{x:e.x,y:e.y},r.createElement("h3",null,l.map(t=>e[t]).join(", ")),p.map(t=>r.createElement("p",{key:`tooltip-dim-${t.name}`},t.name,":"," ",e[t.name].toString&&e[t.name].toString()||e[t.name])),r.createElement("p",null,g,": ",e[g]),r.createElement("p",null,y,": ",e[y]),f&&"none"!==f&&r.createElement("p",null,f,": ",e[f])))},v);return"scatterplot"!==a&&($.areas=M),$},ie={line:{Frame:f.ResponsiveXYFrame,controls:"switch between linetype",chartGenerator:(e,t,n)=>{let a;const{chart:i,selectedMetrics:o,lineType:l,metrics:s,primaryKey:c,colors:p}=n,{timeseriesSort:d}=i,m=t.fields.find(e=>e&&e.name===d),h="array-order"===d?"integer":m&&m.type?m.type:null,u=e=>"datetime"===h?e.toLocaleString().split(",")[0]:P(e),b="datetime"===h?Object(x.c)():Object(x.a)(),g=(a=s.map((t,n)=>{const r="array-order"===d?e:e.sort((e,t)=>e[d]-t[d]);return{color:p[n%p.length],label:t.name,type:t.type,coordinates:r.map((e,r)=>({value:e[t.name],x:"array-order"===d?r:e[d],label:t.name,color:p[n%p.length],originalData:e}))}}).filter(e=>0===o.length||o.some(t=>t===e.label)))[0].coordinates.length>250;return{lineType:{type:l,interpolator:Y.curveMonotoneX},lines:a,xScaleType:b,canvasLines:g,renderKey:(e,t)=>e.coordinates?`line-${e.label}`:`linepoint=${e.label}-${t}`,lineStyle:e=>({fill:"line"===l?"none":e.color,stroke:e.color,fillOpacity:.75}),pointStyle:e=>({fill:e.color,fillOpacity:.75}),axes:[{orient:"left",tickFormat:P},{orient:"bottom",ticks:5,tickFormat:e=>{const t=u(e),n=t.length>4?"45":"0",a=t.length>4?"start":"middle";return r.createElement("text",{transform:`rotate(${n})`,textAnchor:a},t)}}],hoverAnnotation:!0,xAccessor:"x",yAccessor:"value",showLinePoints:!g&&"line"===l,margin:{top:20,right:200,bottom:"datetime"===h?80:40,left:50},legend:{title:"Legend",position:"right",width:200,legendGroups:[{label:"",styleFn:e=>({fill:e.color}),items:a}]},tooltipContent:e=>r.createElement(z,{x:e.x,y:e.y},r.createElement("p",null,e.parentLine&&e.parentLine.label),r.createElement("p",null,e.value&&e.value.toLocaleString()||e.value),r.createElement("p",null,d,": ",u(e.x)),c.map((t,n)=>r.createElement("p",{key:`key-${n}`},t,":"," ",e.originalData[t].toString&&e.originalData[t].toString()||e.originalData[t])))}}},scatter:{Frame:f.ResponsiveXYFrame,controls:"switch between modes",chartGenerator:ae},hexbin:{Frame:f.ResponsiveXYFrame,controls:"switch between modes",chartGenerator:(e,t,n)=>ae(e,t,n,n.areaType)},bar:{Frame:f.ResponsiveOrdinalFrame,controls:"switch between modes",chartGenerator:(e,t,n)=>{const{selectedDimensions:a,chart:i,colors:o,setColor:l,barGrouping:s}=n,{dim1:c,metric1:p,metric3:d,metric4:m}=i,h=0===a.length?c:e=>a.map(t=>e[t]).join(","),u=p,b={},g={Other:"grey"},y=B(h,"none"!==d&&d||u,c,e);let f;d&&"none"!==d&&(b.dynamicColumnWidth=d),"Clustered"===s&&m&&"none"!==m&&(b.rExtent=[Math.min(...e.map(e=>e[p]-e[m])),Math.max(...e.map(e=>e[p]+e[m]))],f=((e,t,n)=>{const a=Math.abs(n.rScale(e[p])-n.rScale(e[p]+e[m]));return r.createElement("g",null,r.createElement("rect",{width:n.width,height:n.height,style:n.styleFn(e)}),r.createElement("g",{transform:`translate(${n.width/2},${e.negative?n.height:0})`,stroke:"#333",strokeWidth:"1",opacity:"0.75"},r.createElement("line",{y1:-a,y2:-a,x1:Math.min(0,-n.width/2+2),x2:Math.max(0,n.width/2-2)}),r.createElement("line",{x1:0,x2:0,y1:-a,y2:a}),r.createElement("line",{y1:a,y2:a,x1:Math.min(0,-n.width/2+2),x2:Math.max(0,n.width/2-2)})))}));const x=y.reduce((e,t)=>e.find(e=>e===t[c].toString())?e:[...e,t[c].toString()],[]);if(c&&"none"!==c&&(x.forEach((e,t)=>{g[e]=t>18?"grey":o[t%o.length]}),b.afterElements=r.createElement(j,{valueHash:{},values:x,colorHash:g,setColor:l,colors:o}),"Clustered"===s||a.length>0&&a.join(",")!==c)){b.pieceHoverAnnotation=!0;const e=[...n.dimensions,...n.metrics];b.tooltipContent=(t=>r.createElement(z,{x:t.x,y:t.y},r.createElement("div",{style:{heightMax:"300px",display:"flex",flexWrap:"wrap"}},e.map((e,n)=>r.createElement("div",{style:{margin:"2px 5px 0",display:"inline-block",minWidth:"100px"},key:`dim-${n}`},r.createElement("span",{style:{fontWeight:600}},e.name),":"," ",t[e.name])))))}a.length>0&&(1!==a.length||c!==a[0])&&y.map(e=>e[c]).reduce((e,t)=>-1===e.indexOf(t)?[...e,t]:e,[]).length;return Object.assign({type:"Clustered"===s?{type:"clusterbar",customMark:f}:{type:"bar",customMark:f},data:y,oAccessor:h,rAccessor:u,style:e=>({fill:g[e[c]]||o[0],stroke:g[e[c]]||o[0]}),oPadding:x.length>30?1:5,oLabel:!(x.length>30)&&(e=>r.createElement("text",{transform:"rotate(90)"},e)),hoverAnnotation:!0,margin:{top:10,right:10,bottom:100,left:70},axis:{orient:"left",label:u,tickFormat:P},tooltipContent:e=>r.createElement(z,{x:e.column.xyData[0].xy.x,y:e.column.xyData[0].xy.y},r.createElement("p",null,"function"==typeof h?h(e.pieces[0]):e.pieces[0][h]),r.createElement("p",null,u,":"," ",e.pieces.map(e=>e[u]).reduce((e,t)=>e+t,0)),d&&"none"!==d&&r.createElement("p",null,d,":"," ",e.pieces.map(e=>e[d]).reduce((e,t)=>e+t,0))),baseMarkProps:{forceUpdate:!0},size:[500,600]},b)}},summary:{Frame:f.ResponsiveOrdinalFrame,controls:"switch between modes",chartGenerator:(e,t,n)=>{const a={},i={},{chart:o,summaryType:l,primaryKey:s,colors:c,setColor:p}=n,{dim1:d,metric1:m}=o,h=d,u=m,b=e.reduce((e,t)=>!e.find(e=>e===t[d].toString())&&[...e,t[d].toString()]||e,[]);return d&&"none"!==d&&(b.forEach((e,t)=>{i[e]=c[t%c.length]}),a.afterElements=r.createElement(j,{valueHash:{},values:b,colorHash:i,setColor:p,colors:c})),Object.assign({summaryType:{type:l,bins:16,amplitude:20},type:"violin"===l&&"swarm",projection:"horizontal",data:e,oAccessor:h,rAccessor:u,summaryStyle:e=>({fill:i[e[d]]||c[0],fillOpacity:.8,stroke:i[e[d]]||c[0]}),style:e=>({fill:i[e[d]]||c[0],stroke:"white"}),oPadding:5,oLabel:!(b.length>30)&&(e=>r.createElement("text",{textAnchor:"end",fontSize:`${e&&Q(e.length)||12}px`},e)),margin:{top:25,right:10,bottom:50,left:100},axis:{orient:"bottom",label:u,tickFormat:P},baseMarkProps:{forceUpdate:!0},pieceHoverAnnotation:"violin"===l,tooltipContent:e=>r.createElement(z,{x:e.x,y:e.y},r.createElement("h3",null,s.map(t=>e[t]).join(", ")),r.createElement("p",null,d,": ",e[d]),r.createElement("p",null,u,": ",e[u]))},a)}},network:{Frame:f.ResponsiveNetworkFrame,controls:"switch between modes",chartGenerator:(e,t,n)=>{const{networkType:a="force",chart:i,colors:o}=n,{dim1:l,dim2:s,metric1:c,networkLabel:p}=i;if(!l||"none"===l||!s||"none"===s)return{};const d={},m=[];e.forEach(e=>{d[`${e[l]}-${e[s]}`]||(d[`${e[l]}-${e[s]}`]={source:e[l],target:e[s],value:0,weight:0},m.push(d[`${e[l]}-${e[s]}`])),d[`${e[l]}-${e[s]}`].value+=e[c]||1,d[`${e[l]}-${e[s]}`].weight+=1});const h={};return e.forEach(e=>{h[e[l]]||(h[e[l]]=o[Object.keys(h).length%o.length]),h[e[s]]||(h[e[s]]=o[Object.keys(h).length%o.length])}),m.forEach(e=>{e.weight=Math.min(10,e.weight)}),{edges:m,edgeType:"force"===a&&"halfarrow",edgeStyle:U[a](h),nodeStyle:X[a](h),nodeSizeAccessor:e=>e.degree,networkType:{type:a,iterations:1e3},hoverAnnotation:J[a],tooltipContent:e=>r.createElement(z,{x:e.x,y:e.y},r.createElement("h3",null,e.id),r.createElement("p",null,"Links: ",e.degree),e.value&&r.createElement("p",null,"Value: ",e.value)),nodeLabels:"matrix"!==a&&_[p],margin:{left:100,right:100,top:10,bottom:10}}}},hierarchy:{Frame:f.ResponsiveNetworkFrame,controls:"switch between modes",chartGenerator:(e,t,n)=>{const{hierarchyType:a="dendrogram",chart:i,selectedDimensions:o,primaryKey:l,colors:s}=n,{metric1:c}=i,p="sunburst"===a?"partition":a;if(0===o.length)return{};const d=Object(V.nest)();o.forEach(e=>{d.key(t=>t[e])});const m={},h=[];return e.forEach(e=>{m[e[o[0]]]||(m[e[o[0]]]=s[Object.keys(m).length]),h.push(Object.assign({},e,{sanitizedR:e.r,r:void 0}))}),{edges:{values:d.entries(h)},edgeStyle:()=>({fill:"lightgray",stroke:"gray"}),nodeStyle:e=>({fill:K(m,e),stroke:1===e.depth?"white":"black",strokeOpacity:.1*e.depth+.2}),networkType:{type:p,projection:"sunburst"===a&&"radial",hierarchySum:e=>e[c],hierarchyChildren:e=>e.values,padding:"treemap"===p?3:0},edgeRenderKey:(e,t)=>t,baseMarkProps:{forceUpdate:!0},margin:{left:100,right:100,top:10,bottom:10},hoverAnnotation:[{type:"frame-hover"},{type:"highlight",style:{stroke:"red",strokeOpacity:.5,strokeWidth:5,fill:"none"}}],tooltipContent:e=>r.createElement(z,{x:e.x,y:e.y},((e,t,n)=>{const a=e.parent?W(e.parent,e.key&&[e.key]||[]).join("->"):"",i=[];return e.parent?e.key?(i.push(r.createElement("h2",{key:"hierarchy-title"},e.key)),i.push(r.createElement("p",{key:"path-string"},a)),i.push(r.createElement("p",{key:"hierarchy-value"},"Total Value: ",e.value)),i.push(r.createElement("p",{key:"hierarchy-children"},"Children: ",e.children.length))):(i.push(r.createElement("p",{key:"leaf-label"},a,"->",t.map(t=>e[t]).join(", "))),i.push(r.createElement("p",{key:"hierarchy-value"},n,": ",e[n]))):i.push(r.createElement("h2",{key:"hierarchy-title"},"Root")),i})(e,l,c))}}},parallel:{Frame:N,controls:"switch between modes",chartGenerator:(e,t,n)=>({data:e,schema:t,options:n})}};var oe=n(211);const le={line:"Line and stacked area charts for time series data where each row is a point and columns are data to be plotted.",bar:"Bar charts to compare individual and aggregate amounts.",scatter:"Scatterplot for comparing correlation between x and y values.",grid:"A table of data.",network:"Force-directed, adjacency matrix, arc diagram and sankey network visualization suitable for data that is an edge list where one dimension represents source and another dimension represents target.",summary:"Distribution plots such as boxplots and violin plots to compare.",hexbin:"Shows aggregate distribution of larger datasets across x and y metrics using hexbin, heatmap or contour plots.",parallel:"Parallel coordinates for comparing and filtering across different values in the dataset.",hierarchy:"Nest data by categorical values using treemap, dendrogram, sunburst or partition."},se={metric1:{default:"Plot this metric",scatter:"Plot this metric along the X axis",hexbin:"Plot this metric along the X axis"},metric2:{default:"Plot this metric along the Y axis"},metric3:{default:"Size the width of bars (Marimekko style) based on this metric",scatter:"Size the radius of points based on this metric"},metric4:"Error bars according to this value",dim1:{default:"Color items by this dimension",summary:"Group items into this category",network:"Use this dimension to determine the source node"},dim2:{default:"Label prominent datapoints using this dimension",network:"Use this dimension to determine the target node"},dim3:{default:"Split contours into separate groups based on this dimension"},networkType:"Represent network as a force-directed network (good for social networks) or as a sankey diagram (good for flow networks)",hierarchyType:"Represent your hierarchy as a tree (good for taxonomies) or a treemap (good for volumes) or partition (also good for volume where category volume is important)",timeseriesSort:"Sort line chart time series by its array position or by a specific metric or time",lineType:"Represent your data using a line chart, stacked area chart or ranked area chart",areaType:"Represent as a heatmap, hexbin or contour plot",lineDimensions:"Only plot the selected dimensions (or all if none are selected)",trendLine:"Select the kind of trend line you want to display on the chart",barGrouping:"Choose between a clustered or a stacked bar chart when there are multiple pieces in the same category",marginalGraphics:"Choose the kind of marginal summary you want to see for summarizing density along the axes"},ce=l.c.path`
  & {
    fill: var(--theme-app-bg, #ccc);
    stroke: var(--theme-app-fg, #2b2b2b);
  }
`,pe=e=>r.createElement(oe.h,{width:16,height:16,viewBox:"0 0 16 16",outerProps:e},r.createElement("title",null,"Summary Diagram"),r.createElement(ce,{d:"M 9.2300893,12.746467 15.329337,12.746467 M 0.73981357,15.376296 6.8390612,15.376296 M 3.9346579,0.6634694 3.9346579,15.376296 M 0.73981357,0.6634694 6.8390612,0.6634694 M 12.424932,1.5163867 12.424932,12.817543 M 9.2300893,1.5163867 15.329337,1.5163867 M 9.3149176,3.8522966 15.454941,3.8522966 15.454941,10.067428 9.3149176,10.067428 Z M 0.63101533,5.4042547 6.771038,5.4042547 6.771038,13.040916 0.63101533,13.040916 Z"})),de=e=>r.createElement(oe.h,{width:16,height:16,viewBox:"0 0 16 16",outerProps:e},r.createElement("title",null,"Dendrogram"),r.createElement(ce,{d:"M 5.3462352,16.86934 5.3462352,11.568531 M 5.0378073,11.186463 10.665375,16.453304 M 5.5794816,11.049276 -0.04808655,16.316116 M 10.903757,11.840357 10.903757,6.5395482 M 10.722225,5.9958343 16.349791,11.262675 M 10.758529,6.1997119 5.1309613,11.466552 M 5.3851096,6.1997401 5.3851096,0.06818774 M 5.3488028,0.96685111 10.976372,6.2336914 M 5.3851095,0.89889187 -0.24245868,6.1657322"})),me=e=>r.createElement(oe.h,{width:16,height:16,viewBox:"0 0 16 16",outerProps:e},r.createElement("title",null,"Network"),r.createElement(ce,{d:"M 12.272948,3.9756652 9.2580839,6.8311579 M 3.7415227,3.9107679 6.435657,6.5066704 M 3.9981069,12.087859 6.6280954,9.6866496 M 12.208802,12.217654 9.0656456,9.556855 M 0.58721146,13.461599 A 2.0038971,2.0273734 0 0 0 2.591109,15.488973 2.0038971,2.0273734 0 0 0 4.5950056,13.461599 2.0038971,2.0273734 0 0 0 2.591109,11.434226 2.0038971,2.0273734 0 0 0 0.58721146,13.461599 Z M 11.483612,2.5370283 A 2.0038971,2.0273734 0 0 0 13.487509,4.5644013 2.0038971,2.0273734 0 0 0 15.491407,2.5370283 2.0038971,2.0273734 0 0 0 13.487509,0.50965432 2.0038971,2.0273734 0 0 0 11.483612,2.5370283 Z M 15.491407,13.461599 A 2.0038971,2.0273734 0 0 1 13.487509,15.488973 2.0038971,2.0273734 0 0 1 11.483612,13.461599 2.0038971,2.0273734 0 0 1 13.487509,11.434226 2.0038971,2.0273734 0 0 1 15.491407,13.461599 Z M 9.9298938,8.1089002 A 2.0038971,2.0273734 0 0 1 7.9259965,10.136275 2.0038971,2.0273734 0 0 1 5.9220989,8.1089002 2.0038971,2.0273734 0 0 1 7.9259965,6.0815273 2.0038971,2.0273734 0 0 1 9.9298938,8.1089002 Z M 4.5950056,2.5370283 A 2.0038971,2.0273734 0 0 1 2.591109,4.5644013 2.0038971,2.0273734 0 0 1 0.58721146,2.5370283 2.0038971,2.0273734 0 0 1 2.591109,0.50965432 2.0038971,2.0273734 0 0 1 4.5950056,2.5370283 Z"})),he=e=>r.createElement(oe.h,{width:16,height:16,viewBox:"0 0 16 16",outerProps:e},r.createElement("title",null,"Scatterplot"),r.createElement(ce,{d:"M 6.2333524,7.1483631 A 2.1883047,2.1883047 0 0 1 4.0450478,9.3366678 2.1883047,2.1883047 0 0 1 1.8567431,7.1483631 2.1883047,2.1883047 0 0 1 4.0450478,4.9600585 2.1883047,2.1883047 0 0 1 6.2333524,7.1483631 Z M 12.201456,4.0316868 A 2.1883047,2.1883047 0 0 1 10.013151,6.2199914 2.1883047,2.1883047 0 0 1 7.8248465,4.0316868 2.1883047,2.1883047 0 0 1 10.013151,1.8433821 2.1883047,2.1883047 0 0 1 12.201456,4.0316868 Z M 14.787634,11.45866 A 2.1883047,2.1883047 0 0 1 12.599329,13.646965 2.1883047,2.1883047 0 0 1 10.411024,11.45866 2.1883047,2.1883047 0 0 1 12.599329,9.2703555 2.1883047,2.1883047 0 0 1 14.787634,11.45866 Z M 0.06631226,-0.01336003 0.06631226,16.100519 16.113879,16.100519"})),ue=e=>r.createElement(oe.h,{width:16,height:16,viewBox:"0 0 16 16",outerProps:e},r.createElement("title",null,"Line Chart"),r.createElement(ce,{d:"M 1.98856,5.3983376 3.9789255,1.5485605 6.8981275,9.2481137 10.215403,6.6815963 15.257662,12.071285 M 0.46261318,0.00862976 0.46261318,15.600225 16.518227,15.600225"})),be=e=>r.createElement(oe.h,{width:16,height:16,viewBox:"0 0 16 16",outerProps:e},r.createElement("title",null,"Hexbin"),r.createElement(ce,{d:"M 7.6646201,7.248835 10.200286,8.7365914 12.71271,7.2956277 12.71271,4.2993354 10.200286,2.8583717 7.6481891,4.3220885 Z M 2.5260861,7.248835 5.0617524,8.7365914 7.5741798,7.2956277 7.5741798,4.2993354 5.0617524,2.8583717 2.509655,4.3220885 Z M 10.151008,11.430063 12.686686,12.917818 15.199098,11.476854 15.199098,8.4805611 12.686686,7.0395985 10.134577,8.5033165 Z M 5.0124743,11.430063 7.5481406,12.917818 10.060567,11.476854 10.060567,8.4805611 7.5481406,7.0395985 4.9960421,8.5033165 Z M 0.59322509,-0.02976587 0.59322509,16.053058 16.562547,16.008864"})),ge=e=>r.createElement(oe.h,{width:16,height:16,viewBox:"0 0 16 16",outerProps:e},r.createElement("title",null,"Bar Chart"),r.createElement(ce,{d:"M 11.58591,8.3025699 15.255735,8.3025699 15.255735,15.691481 11.58591,15.691481 Z M 6.2401471,3.973457 9.9358173,3.973457 9.9358173,15.626376 6.2401471,15.626376 Z M 0.533269,0.53717705 4.6376139,0.53717705 4.6376139,15.583893 0.533269,15.583893 Z"})),ye=e=>r.createElement(oe.h,{width:16,height:16,viewBox:"0 0 16 16",outerProps:e},r.createElement("title",null,"Parallel Coordinates"),r.createElement(ce,{d:"M 2.7232684,11.593098 8.8105743,9.8309837 14.417303,4.2242547 M 12.356336,0.72968704 15.29192,0.72968704 15.29192,8.4261754 12.356336,8.4261754 Z M 6.8447585,6.4156084 10.103282,6.4156084 10.103282,12.352066 6.8447585,12.352066 Z M 0.51572132,6.0114684 3.9294777,6.0114684 3.9294777,16.25395 0.51572132,16.25395 Z"})),fe="\nwidth: 32px;\nheight: 32px;\ncursor: pointer;\ncolor: var(--theme-app-fg);\n",xe=l.c.button`
  ${fe}
  border: 1px solid var(--theme-app-fg);
  background-color: var(--theme-app-bg);
`,ke=l.c.button`
  ${fe}

  border: 1px outset #666;
  background-color: #aaa;
`;class we extends r.PureComponent{render(){const{message:e,onClick:t,children:n,selected:a}=this.props,{title:i=e}=this.props,o=a?ke:xe;return r.createElement(o,{onClick:t,key:e,title:i},n)}}const Ee=l.c.div`
  display: flex;
  flex-flow: column nowrap;
  z-index: 1;
  padding: 5px;
`;function ve({dimensions:e,setGrid:t,setView:n,currentView:a,componentType:i,largeDataset:o}){return r.createElement(Ee,{className:"dx-button-bar"},r.createElement(we,{title:le.grid,onClick:t,message:"Data Table",selected:!1},r.createElement(oe.d,null)),!o&&e.length>0&&r.createElement(we,{title:le.bar,onClick:()=>n("bar"),selected:"bar"===a,message:"Bar Graph"},r.createElement(ge,null)),r.createElement(we,{title:le.summary,onClick:()=>n("summary"),selected:"summary"===a,message:"Summary"},r.createElement(pe,null)),r.createElement(we,{title:le.scatter,onClick:()=>n("scatter"),selected:"scatter"===a,message:"Scatter Plot"},r.createElement(he,null)),r.createElement(we,{title:le.hexbin,onClick:()=>n("hexbin"),selected:"hexbin"===a,message:"Area Plot"},r.createElement(be,null)),!o&&e.length>1&&r.createElement(we,{title:le.network,onClick:()=>n("network"),selected:"network"===a,message:"Network"},r.createElement(me,null)),!o&&e.length>0&&r.createElement(we,{title:le.hierarchy,onClick:()=>n("hierarchy"),selected:"hierarchy"===a,message:"Hierarchy"},r.createElement(de,null)),e.length>0&&r.createElement(we,{title:le.parallel,onClick:()=>n("parallel"),selected:"parallel"===a,message:"Parallel Coordinates"},r.createElement(ye,null)),r.createElement(we,{title:le.line,onClick:()=>n("line"),selected:"line"===a,message:"Line Graph"},r.createElement(ue,null)))}ve.defaultProps={componentType:"toolbar",currentView:"",dimensions:[],setGrid:()=>null,setView:()=>null};const Te=l.c.div`
  flex: 1;
  min-width: 0;
`;const Ce=({children:e,componentType:t})=>r.createElement(Te,null,e);Ce.defaultProps={componentType:"viz",children:r.createElement(function(){return r.createElement("div",null,"This should be a display element!")},null)},Ce.displayName="Viz";const Me=["#DA752E","#E5C209","#1441A0","#B86117","#4D430C","#1DB390","#B3331D","#088EB2","#417505","#E479A8","#F9F39E","#5782DC","#EBA97B","#A2AB60","#B291CF","#8DD2C2","#E6A19F","#3DC7E0","#98CE5B"],Re=l.b`
  h2 {
    text-transform: capitalize;
    margin-bottom: 10px;
  }
  select {
    height: 30px;
  }

  .selected {
    background-color: #d8e1e8 !important;
    background-image: none !important;
  }
`,Se=l.c.div`
  margin-right: 30px;
  ${Re}
`,Oe=l.c.div`
  display: flex;
  flex-wrap: wrap;
  justify-content: left;
  margin-bottom: 30px;
  ${Re}
`,je=(e,t,n,a,i,o="Help me help you help yourself")=>{const l=a?e:["none",...e];let s;return s=l.length>1?r.createElement("select",{onChange:e=>{t(e.target.value)},value:i},l.map((e,t)=>r.createElement("option",{"aria-selected":i===e,key:`display-metric-${t}`,label:e,value:e},e))):r.createElement("p",{style:{margin:0}},l[0]),r.createElement(Se,{title:o},r.createElement("div",null,r.createElement("h3",null,n)),s)},ze=[{type:"line",label:"Line Chart"},{type:"stackedarea",label:"Stacked Area Chart"},{type:"stackedpercent",label:"Stacked Area Chart (Percent)"},{type:"bumparea",label:"Ranked Area Chart"}],$e=[{type:"hexbin",label:"Hexbin"},{type:"heatmap",label:"Heatmap"},{type:"contour",label:"Contour Plot"}];var Ge=({view:e,chart:t,metrics:n,dimensions:a,updateChart:i,selectedDimensions:o,selectedMetrics:l,hierarchyType:s,trendLine:c,marginalGraphics:p,barGrouping:d,summaryType:m,networkType:h,setLineType:u,updateMetrics:b,updateDimensions:g,lineType:y,areaType:f,setAreaType:x,data:k})=>{const w=n.map(e=>e.name),E=a.map(e=>e.name),v=e=>n=>i({chart:Object.assign({},t,{[e]:n})}),T=(e,t)=>{if(Object.keys(se).find(e=>e===t)){const n=t,r=void 0!==se[n]?se[n]:null;return null==r?"":"string"==typeof r?r:null!=r[e]?r[e]:r.default}return""};return r.createElement(r.Fragment,null,r.createElement(Oe,null,("summary"===e||"scatter"===e||"hexbin"===e||"bar"===e||"network"===e||"hierarchy"===e)&&je(w,v("metric1"),"scatter"===e||"hexbin"===e?"X":"Metric",!0,t.metric1,T(e,"metric1")),("scatter"===e||"hexbin"===e)&&je(w,v("metric2"),"Y",!0,t.metric2,T(e,"metric2")),("scatter"===e&&k.length<1e3||"bar"===e)&&je(w,v("metric3"),"bar"===e?"Width":"Size",!1,t.metric3,T(e,"metric3")),"bar"===e&&je(w,v("metric4"),"Error Bars",!1,t.metric4,T(e,"metric4")),"bar"===e&&je(["Clustered","Stacked"],e=>i({barGrouping:e}),"Stack or Cluster",!0,d,se.barGrouping),"scatter"===e&&je(["boxplot","violin","heatmap","ridgeline","histogram"],e=>i({marginalGraphics:e}),"Marginal Graphics",!1,p,se.marginalGraphics),"scatter"===e&&je(["linear","polynomial","power","exponential","logarithmic"],e=>i({trendLine:e}),"Trendline",!1,c,se.trendLine),("summary"===e||"scatter"===e||"hexbin"===e&&"contour"===f||"bar"===e||"parallel"===e)&&je(E,v("dim1"),"summary"===e?"Category":"Color",!0,t.dim1,T(e,"dim1")),"scatter"===e&&je(E,v("dim2"),"Labels",!1,t.dim2,T(e,"dim2")),"hexbin"===e&&"contour"===f&&je(["by color"],v("dim3"),"Multiclass",!1,t.dim3,T(e,"dim3")),"network"===e&&je(E,v("dim1"),"SOURCE",!0,t.dim1,T(e,"dim1")),"network"===e&&je(E,v("dim2"),"TARGET",!0,t.dim2,T(e,"dim2")),"network"===e&&je(["matrix","arc","force","sankey"],e=>i({networkType:e}),"Type",!0,h,se.networkType),"network"===e&&je(["static","scaled"],v("networkLabel"),"Show Labels",!1,t.networkLabel,se.networkLabel),"hierarchy"===e&&je(["dendrogram","treemap","partition","sunburst"],e=>i({hierarchyType:e}),"Type",!0,s,se.hierarchyType),"summary"===e&&je(["violin","boxplot","joy","heatmap","histogram"],e=>i({summaryType:e}),"Type",!0,m,se.summaryType),"line"===e&&je(["array-order",...w],v("timeseriesSort"),"Sort by",!0,t.timeseriesSort,se.timeseriesSort),"line"===e&&r.createElement("div",{title:se.lineType,style:{display:"inline-block"}},r.createElement("div",null,r.createElement("h3",null,"Chart Type")),ze.map(e=>r.createElement("button",{key:e.type,className:`button-text ${y===e.type&&"selected"}`,onClick:()=>u(e.type)},e.label))),"hexbin"===e&&r.createElement("div",{className:"control-wrapper",title:se.areaType},r.createElement("div",null,r.createElement("h3",null,"Chart Type")),$e.map(e=>{const t=e.type;return"contour"===t||"hexbin"===t||"heatmap"===t?r.createElement("button",{className:`button-text ${f===t&&"selected"}`,key:t,onClick:()=>x(t)},e.label):r.createElement("div",null)})),"hierarchy"===e&&r.createElement("div",{className:"control-wrapper",title:se.nestingDimensions},r.createElement("div",null,r.createElement("h3",null,"Nesting")),0===o.length?"Select categories to nest":`root, ${o.join(", ")}`),("bar"===e||"hierarchy"===e)&&r.createElement("div",{className:"control-wrapper",title:se.barDimensions},r.createElement("div",null,r.createElement("h3",null,"Categories")),a.map(e=>r.createElement("button",{key:`dimensions-select-${e.name}`,className:`button-text ${-1!==o.indexOf(e.name)&&"selected"}`,onClick:()=>g(e.name)},e.name))),"line"===e&&r.createElement("div",{className:"control-wrapper",title:se.lineDimensions},r.createElement("div",null,r.createElement("h3",null,"Metrics")),n.map(e=>r.createElement("button",{key:`metrics-select-${e.name}`,className:`button-text ${-1!==l.indexOf(e.name)&&"selected"}`,onClick:()=>b(e.name)},e.name)))))};const Pe="dx-default-pk";n.d(t,"DataExplorer",function(){return Ze}),n.d(t,"Toolbar",function(){return ve}),n.d(t,"Viz",function(){return Ce});const Ae="application/vnd.dataresource+json",De=({view:e,lineType:t,areaType:n,selectedDimensions:r,selectedMetrics:a,pieceType:i,summaryType:o,networkType:l,hierarchyType:s,trendLine:c,marginalGraphics:p,barGrouping:d,chart:m})=>`${e}-${t}-${n}-${r.join(",")}-${a.join(",")}-${i}-${o}-${l}-${s}-${c}-${p}-${d}-${JSON.stringify(m)}`,Le=[500,300],Fe=l.c.div`
  & {
    font-family: Source Sans Pro, Helvetica Neue, Helvetica, Arial, sans-serif;
  }
`,Ne=l.c.div`
  & {
    backgroundcolor: #cce;
    padding: 10px;
    paddingleft: 20px;
  }
`,He=({metadata:e})=>{const t=e&&e.sampled?r.createElement("span",null,r.createElement("b",null,"NOTE:")," This data is sampled"):null;return r.createElement(Fe,null,t?r.createElement(Ne,null,t):null)},Be=l.c.div`
  display: flex;
  flex-flow: row nowrap;
  width: 100%;
`,Ve=l.c.div`
  width: 100%;
  .html-legend-item {
    color: var(--theme-app-fg);
  }

  .tick > path {
    stroke: lightgray;
  }

  .axis-labels,
  .ordinal-labels {
    fill: var(--theme-app-fg);
    font-size: 14px;
  }

  path.connector,
  path.connector-end {
    stroke: var(--theme-app-fg);
  }

  path.connector-end {
    fill: var(--theme-app-fg);
  }

  text.annotation-note-label,
  text.legend-title,
  .legend-item text {
    fill: var(--theme-app-fg);
    stroke: none;
  }

  .xyframe-area > path {
    stroke: var(--theme-app-fg);
  }

  .axis-baseline {
    stroke-opacity: 0.25;
    stroke: var(--theme-app-fg);
  }
  circle.frame-hover {
    fill: none;
    stroke: gray;
  }
  .rect {
    stroke: green;
    stroke-width: 5px;
    stroke-opacity: 0.5;
  }
  rect.selection {
    opacity: 0.5;
  }
`;class Ze extends r.PureComponent{constructor(e){super(e),this.updateChart=(e=>{const{view:t,dimensions:n,metrics:a,chart:i,lineType:o,areaType:l,selectedDimensions:s,selectedMetrics:c,pieceType:p,summaryType:d,networkType:m,hierarchyType:h,trendLine:u,marginalGraphics:b,barGrouping:g,colors:y,primaryKey:f,data:x}=Object.assign({},this.state,e);if(!this.props.data&&!this.props.metadata&&!this.props.initialView)return;const{data:k,height:w}=this.props,{Frame:E,chartGenerator:v}=ie[t],T=De({view:t,lineType:o,areaType:l,selectedDimensions:s,selectedMetrics:c,pieceType:p,summaryType:d,networkType:m,hierarchyType:h,chart:i,trendLine:u,marginalGraphics:b,barGrouping:g}),C=v(x,k.schema,{metrics:a,dimensions:n,chart:i,colors:y,height:w,lineType:o,areaType:l,selectedDimensions:s,selectedMetrics:c,pieceType:p,summaryType:d,networkType:m,hierarchyType:h,primaryKey:f,trendLine:u,marginalGraphics:b,barGrouping:g,setColor:this.setColor}),M=r.createElement(Ve,null,r.createElement(E,Object.assign({responsiveWidth:!0,size:Le},C)),r.createElement(Ge,Object.assign({},{data:x,view:t,chart:i,metrics:a,dimensions:n,selectedDimensions:s,selectedMetrics:c,hierarchyType:h,summaryType:d,networkType:m,trendLine:u,marginalGraphics:b,barGrouping:g,updateChart:this.updateChart,updateDimensions:this.updateDimensions,setLineType:this.setLineType,updateMetrics:this.updateMetrics,lineType:o,setAreaType:this.setAreaType,areaType:l})));this.updateMetadata({view:t,lineType:o,areaType:l,selectedDimensions:s,selectedMetrics:c,pieceType:p,summaryType:d,networkType:m,hierarchyType:h,trendLine:u,marginalGraphics:b,barGrouping:g,colors:y,chart:i}),this.setState(t=>Object.assign({},e,{displayChart:Object.assign({},t.displayChart,{[T]:M})}))}),this.setView=(e=>{this.updateChart({view:e})}),this.updateMetadata=(e=>{const{onMetadataChange:t,metadata:n}=this.props,{view:r,lineType:a,areaType:i,selectedDimensions:o,selectedMetrics:l,pieceType:s,summaryType:c,networkType:p,hierarchyType:d,trendLine:m,marginalGraphics:h,barGrouping:u,colors:b,chart:g}=this.state;t&&t(Object.assign({},n,{dx:Object.assign({view:r,lineType:a,areaType:i,selectedDimensions:o,selectedMetrics:l,pieceType:s,summaryType:c,networkType:p,hierarchyType:d,trendLine:m,marginalGraphics:h,barGrouping:u,colors:b,chart:g},e)}),Ae)}),this.setGrid=(()=>{this.updateMetadata({view:"grid"}),this.setState({view:"grid"})}),this.setColor=(e=>{this.updateChart({colors:e})}),this.setLineType=(e=>{this.updateChart({lineType:e})}),this.setAreaType=(e=>{this.updateChart({areaType:e})}),this.updateDimensions=(e=>{const t=this.state.selectedDimensions,n=-1===t.indexOf(e)?[...t,e]:t.filter(t=>t!==e);this.updateChart({selectedDimensions:n})}),this.updateMetrics=(e=>{const t=this.state.selectedMetrics,n=-1===t.indexOf(e)?[...t,e]:t.filter(t=>t!==e);this.updateChart({selectedMetrics:n})});const{metadata:t,initialView:n}=e,a=t.dx||{},i=a.chart||{};let{fields:o=[],primaryKey:l=[]}=e.data.schema;0===l.length&&(l=[Pe],o=[...o,{name:Pe,type:"integer"}]);const s=o.filter(e=>"string"===e.type||"boolean"===e.type||"datetime"===e.type).map(e=>Object.assign({},e,{cardinality:0})),c=e.data.data.map((e,t)=>{const n=Object.assign({},e);return o.forEach(e=>{e.name===Pe&&(n[Pe]=t),"datetime"===e.type&&(n[e.name]=new Date(n[e.name]))}),n});let p=!0,d=[];if(c.length<5e3){p=!1;const e={};s.forEach(t=>{e[t.name]={},c.forEach(n=>{const r=n[t.name];e[t.name][r]=!0}),t.cardinality=Object.entries(e[t.name]).length}),d=s.sort((e,t)=>e.cardinality-t.cardinality).filter((e,t)=>0===t).map(e=>e.name)}const m=o.filter(e=>"integer"===e.type||"number"===e.type||"datetime"===e.type).filter(e=>!l.find(t=>t===e.name));this.state=Object.assign({largeDataset:p,view:n,lineType:"line",areaType:"hexbin",trendLine:"none",marginalGraphics:"none",barGrouping:"Clustered",selectedDimensions:d,selectedMetrics:[],pieceType:"bar",summaryType:"violin",networkType:"force",hierarchyType:"dendrogram",dimensions:s,metrics:m,colors:Me,chart:Object.assign({metric1:m[0]&&m[0].name||"none",metric2:m[1]&&m[1].name||"none",metric3:"none",metric4:"none",dim1:s[0]&&s[0].name||"none",dim2:s[1]&&s[1].name||"none",dim3:"none",timeseriesSort:"array-order",networkLabel:"none"},i),displayChart:{},primaryKey:l,data:c},a)}componentDidMount(){"grid"!==this.state.view&&this.updateChart(this.state)}render(){const{view:e,dimensions:t,chart:n,lineType:a,areaType:i,selectedDimensions:o,selectedMetrics:l,pieceType:s,summaryType:c,networkType:p,hierarchyType:d,trendLine:m,marginalGraphics:h,barGrouping:u,largeDataset:b}=this.state;let g=null;if("grid"===e)g=r.createElement(y,Object.assign({},this.props));else if(["line","scatter","bar","network","summary","hierarchy","hexbin","parallel"].includes(e)){const t=De({view:e,lineType:a,areaType:i,selectedDimensions:o,selectedMetrics:l,pieceType:s,summaryType:c,networkType:p,hierarchyType:d,chart:n,trendLine:m,marginalGraphics:h,barGrouping:u});g=this.state.displayChart[t]}const f=r.Children.map(this.props.children,n=>{if(!r.isValidElement(n))return;const{componentType:a}=n.props;if("viz"===a){const e={children:g};return r.cloneElement(n,e)}if("toolbar"===a){const a={dimensions:t,currentView:e,setGrid:this.setGrid,setView:this.setView,largeDataset:b};return r.cloneElement(n,a)}return n});return r.createElement("div",null,r.createElement(He,{metadata:this.props.metadata}),r.createElement(Be,null,f))}}Ze.MIMETYPE=Ae,Ze.defaultProps={metadata:{dx:{}},height:500,mediaType:Ae,initialView:"grid"};const We=e=>r.createElement(Ze,Object.assign({},e),r.createElement(Ce,null),r.createElement(ve,null));We.defaultProps={mediaType:Ae},We.displayName="DataExplorerDefault",We.MIMETYPE=Ae;t.default=We}}]);