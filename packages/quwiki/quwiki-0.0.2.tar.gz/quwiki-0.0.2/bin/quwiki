#!/usr/bin/python3

import sys
import argparse
import logging
import logging.handlers
from quwiki.generator import generate
from quwiki.initializer import initialize


logger = logging.getLogger()


def main():
    parser = argparse.ArgumentParser(description='Transform your Google Docs into a beautiful Wiki for your team.')
    subparsers = parser.add_subparsers()

    init_parser = subparsers.add_parser('init', description='Initialize QuWiki configuration')
    init_parser.add_argument('--config', default='quwiki.yaml')
    init_parser.set_defaults(func=initialize)

    generate_parser = subparsers.add_parser('generate', description='Generates static, Wiki like, HTML files out of the given sources')
    generate_parser.set_defaults(func=generate)
    generate_parser.add_argument('--config', default='quwiki.yaml')

    args = parser.parse_args(['generate'] if len(sys.argv) == 1 else None)
    args.func(args)


if __name__ == '__main__':
    main()
