define(["@jupyter-widgets/base","mapbox-gl","h3","s2Geometry","deck.gl","loaders.gl/csv"],(function(e,t,n,o,r,i){return function(e){function t(t){for(var n,r,i=t[0],c=t[1],l=0,s=[];l<i.length;l++)r=i[l],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&s.push(o[r][0]),o[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(u&&u(t);s.length;)s.shift()()}var n={},o={0:0};function r(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=n,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r.oe=function(e){throw console.error(e),e};var i=window.webpackJsonp=window.webpackJsonp||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;return r(r.s=12)}([function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(t,n){t.exports=e},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}e.exports=function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}},function(e,t,n){var o=n(8),r=n(9);e.exports=function(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?r(e):t}},function(e,t,n){var o=n(10);function r(t,n,i){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=r=Reflect.get:e.exports=r=function(e,t,n){var r=o(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}},r(t,n,i||t)}e.exports=r},function(e,t,n){var o=n(11);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=o=function(e){return n(e)}:e.exports=o=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},o(t)}e.exports=o},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){var o=n(0);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}},function(e,t){function n(t,o){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,o)}e.exports=n},function(e,t,n){"use strict";n.r(t);var o,r,i="@deck.gl/jupyter-widget",c=n(1),l=n.n(c),u=n(3),s=n.n(u),a=n(4),p=n.n(a),f=n(5),d=n.n(f),y=n(0),m=n.n(y),b=n(6),h=n.n(b),v=n(7),g=n.n(v),O=n(2);function j(e){if(!e.picked)return null;if(e.object===o)return r;var t={html:x(e.object),style:{fontFamily:'"Helvetica Neue", Helvetica, Arial, sans-serif',display:"flex",flex:"wrap",maxWidth:"500px",flexDirection:"column",zIndex:2}};return r=t,o=e.object,t}var w=new Set(["position","index"]);function x(e){var t=document.createElement("div");for(var n in t.className="dataTable",e)if(!w.has(n)){var o=document.createElement("div");o.className="header",o.innerText=n;var r=document.createElement("div");r.className="value",r.innerText=k(e[n]);var i=document.createElement("div");_(i,o,r),i.appendChild(o),i.appendChild(r),t.appendChild(i)}return t.innerHTML}function _(e,t,n){Object.assign(t.style,{fontWeight:700,marginRight:"10px",flex:1}),Object.assign(n.style,{flex:"none",maxWidth:"250px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}),Object.assign(e.style,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"stretch"})}function k(e){var t;if(Array.isArray(e)&&e.length>4)t="Array<".concat(e.length,">");else try{t=JSON.stringify(e)}catch(e){t="<Non-Serializable Object>"}return t.length>50&&(t=t.slice(0,50)),t}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function S(e){var t=e.mapboxApiKey,o=e.container,r=e.jsonInput,i=e.useTooltip,c=e.onComplete,u=e.handleClick;Promise.resolve().then((function(){var e=[n(13),n(14),n(15)];(function(e){Promise.resolve().then((function(){var s=[n(16),n(17)];(function(n,s){try{var a={};Object.keys(n).filter((function(e){return(e.indexOf("Layer")>0||e.indexOf("View")>0)&&0!==e.indexOf("_")})).map((function(e){return a[e]=n[e]})),s.registerLoaders([s.CSVLoader]);var p=new n.JSONConverter({configuration:{classes:a}}),f=p.convert(r),d=new n.DeckGL(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(n,!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},f,{map:e,mapboxApiAccessToken:t,onClick:u,getTooltip:i?j:null,container:o}));c&&c({jsonConverter:p,deckgl:d})}catch(e){console.error(e)}return{}}).apply(null,s)})).catch(n.oe)}).apply(null,e)})).catch(n.oe)}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(n,!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=function(e){function t(){return s()(this,t),d()(this,m()(t).apply(this,arguments))}return g()(t,e),p()(t,[{key:"defaults",value:function(){return C({},h()(m()(t.prototype),"defaults",this).call(this),{_model_name:t.model_name,_model_module:t.model_module,_model_module_version:t.model_module_version,_view_name:t.view_name,_view_module:t.view_module,_view_module_version:t.view_module_version,json_input:null,mapbox_key:null,selected_data:null,tooltip:null,width:"100%",height:500})}}],[{key:"serializers",get:function(){return C({},O.DOMWidgetModel.serializers)}},{key:"model_name",get:function(){return"DeckGLModel"}},{key:"model_module",get:function(){return i}},{key:"model_module_version",get:function(){return"7.3.0-beta.5"}},{key:"view_name",get:function(){return"DeckGLView"}},{key:"view_module",get:function(){return i}},{key:"view_module_version",get:function(){return"7.3.0-beta.5"}}]),t}(O.DOMWidgetModel),M=function(e){function t(){return s()(this,t),d()(this,m()(t).apply(this,arguments))}return g()(t,e),p()(t,[{key:"initialize",value:function(){var e=this;this.listenTo(this.model,"destroy",this.remove);var t=document.createElement("div");this.el.appendChild(t);var n="".concat(this.model.get("height"),"px"),o=Number.isFinite(this.model.get("width"))?"".concat(this.model.get("width"),"px"):this.model.get("width");t.style.width=o,t.style.height=n,t.style.position="relative";var r,i,c=this.model.get("mapbox_key"),l=JSON.parse(this.model.get("json_input")),u=this.model.get("tooltip");r="https://api.tiles.mapbox.com/mapbox-gl-js/v1.2.1/mapbox-gl.css",(i=document.createElement("link")).type="text/css",i.rel="stylesheet",i.href=r,document.getElementsByTagName("head")[0].appendChild(i),S({mapboxApiKey:c,container:t,jsonInput:l,useTooltip:u,onComplete:function(t){var n=t.jsonConverter,o=t.deckgl;e.jsonDeck={jsonConverter:n,deckgl:o}},handleClick:this.handleClick.bind(this)})}},{key:"remove",value:function(){this.jsonDeck&&(this.jsonDeck.deckgl.finalize(),this.jsonDeck=null)}},{key:"render",value:function(){h()(m()(t.prototype),"render",this).call(this),this.model.on("change:json_input",this.valueChanged.bind(this),this)}},{key:"valueChanged",value:function(){var e,t,n,o,r,i;e=JSON.parse(this.model.get("json_input")),t=this.jsonDeck,n=t.jsonConverter,o=t.deckgl,r=n.convert(e),o.setProps(r),(i=document.getElementsByClassName("mapboxgl-missing-css")[0])&&(i.style.display="none")}},{key:"handleClick",value:function(e){e&&(e.object&&e.object.points?this.model.set("selected_data",e.object.points):this.model.set("selected_data",e.object),this.model.save_changes())}}]),t}(O.DOMWidgetView);n.d(t,"MODULE_VERSION",(function(){return"7.3.0-beta.5"})),n.d(t,"MODULE_NAME",(function(){return i})),n.d(t,"DeckGLModel",(function(){return E})),n.d(t,"DeckGLView",(function(){return M})),n.d(t,"initDeck",(function(){return S}));var N=document.querySelector("body").getAttribute("data-base-url");N&&(window.__webpack_public_path__="".concat(N,"nbextensions/pydeck/nb_extension"))},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=o},function(e,t){e.exports=r},function(e,t){e.exports=i}])}));
//# sourceMappingURL=index.js.map