(self.webpackJsonp=self.webpackJsonp||[]).push([[19],{708:function(n,t,e){"use strict";e.r(t);var i,a,o,s,r,c,d,p,l,u=e(0),h=e(1),f=(e(207),e(108),e(152),e(160),e(178),e(189),e(279)),g=e(124),b=e(470),y=e(199),x=e(177),_=e(18),v=e(471),m=e(121),j=e(461),O=["Alexa.EndpointHealth"],w=function(n){return void 0===n.should_expose||n.should_expose};!function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t._entityConfigs={},t._popstateSyncAttached=!1,t._popstateReloadStatusAttached=!1,t._getEntityFilterFunc=Object(g.a)(function(n){return Object(b.a)(n.include_domains,n.include_entities,n.exclude_domains,n.exclude_entities)}),t}u.d(t,n),t.prototype.render=function(){var n=this;if(void 0===this._entities)return Object(h.f)(i||(i=u.f(["\n        <hass-loading-screen></hass-loading-screen>\n      "],["\n        <hass-loading-screen></hass-loading-screen>\n      "])));var t=Object(b.b)(this.cloudStatus.alexa_entities),e=this._getEntityFilterFunc(this.cloudStatus.alexa_entities),l=this._isInitialExposed||new Set,f=void 0===this._isInitialExposed,g=0,y=[],x=[];return this._entities.forEach(function(i){var o=n.hass.states[i.entity_id],s=n._entityConfigs[i.entity_id]||{},r=t?w(s):e(i.entity_id);r&&(g++,f&&l.add(i.entity_id)),(l.has(i.entity_id)?y:x).push(Object(h.f)(a||(a=u.f(['\n        <ha-card>\n          <div class="card-content">\n            <state-info\n              .hass=',"\n              .stateObj=","\n              secondary-line\n              @click=","\n            >\n              ","\n            </state-info>\n            <paper-toggle-button\n              .entityId=","\n              .disabled=","\n              .checked=","\n              @checked-changed=","\n            >\n              Expose to Alexa\n            </paper-toggle-button>\n          </div>\n        </ha-card>\n      "],['\n        <ha-card>\n          <div class="card-content">\n            <state-info\n              .hass=',"\n              .stateObj=","\n              secondary-line\n              @click=","\n            >\n              ","\n            </state-info>\n            <paper-toggle-button\n              .entityId=","\n              .disabled=","\n              .checked=","\n              @checked-changed=","\n            >\n              Expose to Alexa\n            </paper-toggle-button>\n          </div>\n        </ha-card>\n      "])),n.hass,o,n._showMoreInfo,i.interfaces.filter(function(n){return!O.includes(n)}).map(function(n){return n.replace("Alexa.","").replace("Controller","")}).join(", "),i.entity_id,!t,r,n._exposeChanged))}),f&&(this._isInitialExposed=l),Object(h.f)(p||(p=u.f(['\n      <hass-subpage header="Alexa">\n        <span slot="toolbar-icon">\n          ',"","\n        </span>\n        ","\n        ","\n          ","\n          ","\n        </div>\n      </hass-subpage>\n    "],['\n      <hass-subpage header="Alexa">\n        <span slot="toolbar-icon">\n          ',"","\n        </span>\n        ","\n        ","\n          ","\n          ","\n        </div>\n      </hass-subpage>\n    "])),g,this.narrow?"":Object(h.f)(o||(o=u.f(["\n            selected\n          "],["\n            selected\n          "]))),t?Object(h.f)(s||(s=u.f(['\n                <paper-icon-button\n                  slot="toolbar-icon"\n                  icon="hass:tune"\n                  @click=',"\n                ></paper-icon-button>\n              "],['\n                <paper-icon-button\n                  slot="toolbar-icon"\n                  icon="hass:tune"\n                  @click=',"\n                ></paper-icon-button>\n              "])),this._openDomainToggler):"",t?"":Object(h.f)(r||(r=u.f(['\n                <div class="banner">\n                  Editing which entities are exposed via this UI is disabled\n                  because you have configured entity filters in\n                  configuration.yaml.\n                </div>\n              '],['\n                <div class="banner">\n                  Editing which entities are exposed via this UI is disabled\n                  because you have configured entity filters in\n                  configuration.yaml.\n                </div>\n              ']))),y.length>0?Object(h.f)(c||(c=u.f(['\n                  <h1>Exposed entities</h1>\n                  <div class="content">',"</div>\n                "],['\n                  <h1>Exposed entities</h1>\n                  <div class="content">',"</div>\n                "])),y):"",x.length>0?Object(h.f)(d||(d=u.f(['\n                  <h1>Not Exposed entities</h1>\n                  <div class="content">',"</div>\n                "],['\n                  <h1>Not Exposed entities</h1>\n                  <div class="content">',"</div>\n                "])),x):"")},t.prototype.firstUpdated=function(t){n.prototype.firstUpdated.call(this,t),this._fetchData()},t.prototype.updated=function(t){n.prototype.updated.call(this,t),t.has("cloudStatus")&&(this._entityConfigs=this.cloudStatus.prefs.alexa_entity_configs)},t.prototype._fetchData=function(){return u.b(this,void 0,void 0,function(){var n,t=this;return u.e(this,function(e){switch(e.label){case 0:return[4,Object(j.a)(this.hass)];case 1:return(n=e.sent()).sort(function(n,e){var i=t.hass.states[n.entity_id],a=t.hass.states[e.entity_id];return Object(y.b)(i?Object(x.a)(i):n.entity_id,a?Object(x.a)(a):e.entity_id)}),this._entities=n,[2]}})})},t.prototype._showMoreInfo=function(n){var t=n.currentTarget.stateObj.entity_id;Object(_.a)(this,"hass-more-info",{entityId:t})},t.prototype._exposeChanged=function(n){return u.b(this,void 0,void 0,function(){var t,e;return u.e(this,function(i){switch(i.label){case 0:return t=n.currentTarget.entityId,e=n.detail.value,[4,this._updateExposed(t,e)];case 1:return i.sent(),[2]}})})},t.prototype._updateExposed=function(n,t){return u.b(this,void 0,void 0,function(){var e;return u.e(this,function(i){switch(i.label){case 0:return e=w(this._entityConfigs[n]||{}),t===e?[2]:[4,this._updateConfig(n,{should_expose:t})];case 1:return i.sent(),this._ensureEntitySync(),[2]}})})},t.prototype._updateConfig=function(n,t){return u.b(this,void 0,void 0,function(){var e,i;return u.e(this,function(a){switch(a.label){case 0:return[4,Object(f.h)(this.hass,n,t)];case 1:return e=a.sent(),this._entityConfigs=u.a({},this._entityConfigs,((i={})[n]=e,i)),this._ensureStatusReload(),[2]}})})},t.prototype._openDomainToggler=function(){var n=this;Object(v.a)(this,{domains:this._entities.map(function(n){return Object(m.a)(n.entity_id)}).filter(function(n,t,e){return e.indexOf(n)===t}),toggleDomain:function(t,e){n._entities.forEach(function(i){Object(m.a)(i.entity_id)===t&&n._updateExposed(i.entity_id,e)})}})},t.prototype._ensureStatusReload=function(){if(!this._popstateReloadStatusAttached){this._popstateReloadStatusAttached=!0;var n=this.parentElement;window.addEventListener("popstate",function(){return Object(_.a)(n,"ha-refresh-cloud-status")},{once:!0})}},t.prototype._ensureEntitySync=function(){this._popstateSyncAttached||(this._popstateSyncAttached=!0,window.addEventListener("popstate",function(){},{once:!0}))},Object.defineProperty(t,"styles",{get:function(){return Object(h.c)(l||(l=u.f(["\n      .banner {\n        color: var(--primary-text-color);\n        background-color: var(\n          --ha-card-background,\n          var(--paper-card-background-color, white)\n        );\n        padding: 16px 8px;\n        text-align: center;\n      }\n      h1 {\n        color: var(--primary-text-color);\n        font-size: 24px;\n        letter-spacing: -0.012em;\n        margin-bottom: 0;\n        padding: 0 8px;\n      }\n      .content {\n        display: flex;\n        flex-wrap: wrap;\n        padding: 4px;\n        --paper-toggle-button-label-spacing: 16px;\n      }\n      paper-toggle-button {\n        clear: both;\n      }\n      ha-card {\n        margin: 4px;\n        width: 100%;\n        max-width: 300px;\n      }\n      .card-content {\n        padding-bottom: 12px;\n      }\n      state-info {\n        cursor: pointer;\n      }\n      paper-toggle-button {\n        padding: 8px 0;\n      }\n\n      @media all and (max-width: 450px) {\n        ha-card {\n          max-width: 100%;\n        }\n      }\n    "],["\n      .banner {\n        color: var(--primary-text-color);\n        background-color: var(\n          --ha-card-background,\n          var(--paper-card-background-color, white)\n        );\n        padding: 16px 8px;\n        text-align: center;\n      }\n      h1 {\n        color: var(--primary-text-color);\n        font-size: 24px;\n        letter-spacing: -0.012em;\n        margin-bottom: 0;\n        padding: 0 8px;\n      }\n      .content {\n        display: flex;\n        flex-wrap: wrap;\n        padding: 4px;\n        --paper-toggle-button-label-spacing: 16px;\n      }\n      paper-toggle-button {\n        clear: both;\n      }\n      ha-card {\n        margin: 4px;\n        width: 100%;\n        max-width: 300px;\n      }\n      .card-content {\n        padding-bottom: 12px;\n      }\n      state-info {\n        cursor: pointer;\n      }\n      paper-toggle-button {\n        padding: 8px 0;\n      }\n\n      @media all and (max-width: 450px) {\n        ha-card {\n          max-width: 100%;\n        }\n      }\n    "])))},enumerable:!0,configurable:!0}),u.c([Object(h.g)()],t.prototype,"hass",void 0),u.c([Object(h.g)()],t.prototype,"cloudStatus",void 0),u.c([Object(h.g)({type:Boolean})],t.prototype,"narrow",void 0),u.c([Object(h.g)()],t.prototype,"_entities",void 0),u.c([Object(h.g)()],t.prototype,"_entityConfigs",void 0),t=u.c([Object(h.d)("cloud-alexa")],t)}(h.a)}}]);
//# sourceMappingURL=chunk.7739e23a70664ddaa6fb.js.map